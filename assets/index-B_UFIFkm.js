import{r as q,a as Ze,g as ze,c as Le,b as _e,R as ke}from"./vendor-CyBwq7db.js";import{j as qe,h as et,a as tt,_ as Ge}from"./pdf-BvPGsvip.js";(function(){const Q=document.createElement("link").relList;if(Q&&Q.supports&&Q.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))se($);new MutationObserver($=>{for(const X of $)if(X.type==="childList")for(const z of X.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&se(z)}).observe(document,{childList:!0,subtree:!0});function ie($){const X={};return $.integrity&&(X.integrity=$.integrity),$.referrerPolicy&&(X.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?X.credentials="include":$.crossOrigin==="anonymous"?X.credentials="omit":X.credentials="same-origin",X}function se($){if($.ep)return;$.ep=!0;const X=ie($);fetch($.href,X)}})();var Ke={exports:{}},De={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=q,nt=Symbol.for("react.element"),ot=Symbol.for("react.fragment"),st=Object.prototype.hasOwnProperty,at=rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,it={key:!0,ref:!0,__self:!0,__source:!0};function He(H,Q,ie){var se,$={},X=null,z=null;ie!==void 0&&(X=""+ie),Q.key!==void 0&&(X=""+Q.key),Q.ref!==void 0&&(z=Q.ref);for(se in Q)st.call(Q,se)&&!it.hasOwnProperty(se)&&($[se]=Q[se]);if(H&&H.defaultProps)for(se in Q=H.defaultProps,Q)$[se]===void 0&&($[se]=Q[se]);return{$$typeof:nt,type:H,key:X,ref:z,props:$,_owner:at.current}}De.Fragment=ot;De.jsx=He;De.jsxs=He;Ke.exports=De;var t=Ke.exports,We,Be=Ze;We=Be.createRoot,Be.hydrateRoot;const lt=["Audacious","Berserker","Bestla","Ragnarok","Thor","Titan","Tyr","Valhalla"];function ct(){const[H,Q]=q.useState("patrol"),[ie,se]=q.useState(""),[$,X]=q.useState(""),[z,re]=q.useState(""),[i,p]=q.useState(""),[e,o]=q.useState("Gullinbursti"),[n,r]=q.useState(""),[d,u]=q.useState(""),[m,l]=q.useState(""),[a,s]=q.useState(""),[c,f]=q.useState(""),[h,y]=q.useState(""),[O,F]=q.useState("Athena"),[x,T]=q.useState([]),[k,A]=q.useState(!1),[D,w]=q.useState(!1),[M,_]=q.useState("Charm"),[ne,R]=q.useState("Charm"),[g,G]=q.useState(1),[j,C]=q.useState(1),[b,P]=q.useState(""),[L,W]=q.useState(""),[E,I]=q.useState("");q.useEffect(()=>{const ae=localStorage.getItem("mode");ae&&Q(ae);const de=localStorage.getItem("voyageNumber");de&&P(de);const ue=localStorage.getItem("ancientCoins");ue&&W(ue);const je=localStorage.getItem("fishCaught");je&&I(je);const Pe=localStorage.getItem("parchment");Pe&&G(Number(Pe)||1);const xe=localStorage.getItem("frame");xe&&C(Number(xe)||0)},[]),q.useEffect(()=>{d===""&&u(JSON.stringify([{id:String(Date.now()),name:"",discord:"",rank:"",role:""}]))},[]);const U=(ae,de)=>{let ue;return(...je)=>{ue&&clearTimeout(ue),ue=setTimeout(()=>ae(...je),de)}};q.useEffect(()=>{U(()=>{localStorage.setItem("mode",H),localStorage.setItem("body",$),localStorage.setItem("signature",z),localStorage.setItem("subtitle",i),localStorage.setItem("events",n),localStorage.setItem("crew",d),localStorage.setItem("gold",m),localStorage.setItem("doubloons",a),localStorage.setItem("ourTeam",O),localStorage.setItem("dives",JSON.stringify(x)),localStorage.setItem("selectedShip",e),localStorage.setItem("titleFont",M),localStorage.setItem("bodyFont",ne),localStorage.setItem("parchment",String(g)),localStorage.setItem("frame",String(j)),localStorage.setItem("voyageNumber",b),localStorage.setItem("ancientCoins",L),localStorage.setItem("fishCaught",E)},500)()},[H,$,z,i,n,d,m,a,O,x,e,M,ne,b,L,E,g,j]);const te=()=>{const ae={ourTeam:O,enemyTeam:O==="Athena"?"Reaper":"Athena",outcome:"win",notes:""};T([...x,ae])},J=(ae,de)=>{T(x.map((ue,je)=>je===ae?{...ue,...de}:ue))},B=ae=>{T(x.filter((de,ue)=>ue!==ae))},Y=()=>{se("Log Title"),X(""),re(""),p(""),r(""),u(""),l(""),s(""),F("Athena"),T([]),P(""),W(""),I(""),f(""),y(""),o("Gullinbursti"),_("Felipa"),R("Jim Nightshade"),G(1),C(1)},ge=ae=>ae?ae.split(`
`).filter(de=>de.trim()!==""):[],Se=ae=>{const de=Number(ae);if(!Number.isFinite(de)||de===0)return"nth";const ue=de%100;if(ue>=11&&ue<=13)return`${de}th`;const je=de%10;return je===1?`${de}st`:je===2?`${de}nd`:je===3?`${de}rd`:`${de}th`},we=()=>{let ae=[];try{ae=JSON.parse(d||"[]")}catch{ae=[]}const de=ae.find(pe=>pe.id===z),ue=(de==null?void 0:de.discord)||"000000000000000000",je=["Recruit","Seaman","Marine","Lance Corporal","Able Seaman","Corporal","Junior Petty Officer","Staff Sergeant","Petty Officer","Gunnery Sergeant","Chief Petty Officer","Master Sergeant","Senior Chief Petty Officer","Second Lieutenant","Midshipman","Marine Captain","Lieutenant","Major","Lieutenant Commander","Lieutenant Colonel","Commander","Colonel","Captain","Brigadier General","Commodore","Major General","Rear Admiral","Vice Admiral","Admiral"];ae.sort((pe,v)=>{const S=je.indexOf(pe.rank);return je.indexOf(v.rank)-S});const Pe={Helm:":Wheel:",Cannons:":Cannon:",Carpenter:":Planks:",Flex:":SwordFight:"},xe=ae.filter(pe=>pe.discord&&pe.role).map(pe=>{const v=Pe[pe.role]||"",S=pe.isRep?" [REP]":"";return`<@${pe.discord}> - ${pe.role} ${v}${S}`.trim()}).join(`
`),Ne=(n||"").split(`
`).filter(Boolean).join(`
`),Ee=e==="Gullinbursti"?"":", auxiliary to the USS Gullinbursti",ve=b?Se(b):"nth";if(H==="patrol"){const pe=[];return pe.push(`:Gold: Gold: ${m||"0"}`),pe.push(`:Doubloons: Doubloons: ${a||"0"}`),L&&parseInt(L)>0&&pe.push(`:AncientCoin: Ancient Coins: ${L}`),E&&parseInt(E)>0&&pe.push(`:fish: Fish: ${E}`),`<@${ue}>'s log of the ${ve} voyage (Patrol) aboard the USS ${e}${Ee}.

**Entry Log**
${$||""}

**Loot Confiscated:**
${pe.join(`
`)}

**Events:**
${Ne||"None"}

**Crew:**
${xe||"No crew assigned"}

:Gullinbursti: Charging Forth, Radiant and Unyielding :Gullinbursti:`}else{const pe=x.length?x.map((v,S)=>`${S+1}. ${v.ourTeam} vs ${v.enemyTeam} (${v.outcome})${v.notes?` - ${v.notes}`:""}`).join(`
`):"No dives recorded";return`<@${ue}>'s log of the ${ve} voyage (Skirmish) aboard the USS ${e}${Ee}.

**Entry Log**
${$||""}

**Team:** ${O}

**Crew:**
${xe||"No crew assigned"}

**Dives:**
${pe}

:Gullinbursti: Charging Forth, Radiant and Unyielding :Gullinbursti:`}},he=q.useRef(null);return q.useEffect(()=>{const ae=xe=>{if(!xe)return 0;const Ne=parseFloat(xe.replace(/[^0-9.-]/g,""));return Number.isFinite(Ne)?Ne:0},de=ae(c),je=ae(h)-de,Pe=je?String(je):"";(m===""||he.current===m)&&(l(Pe),he.current=Pe)},[c,h]),{mode:H,setMode:Q,selectedShip:e,setSelectedShip:o,events:n,setEvents:r,crew:d,setCrew:u,gold:m,setGold:l,doubloons:a,setDoubloons:s,startgold:c,setStartgold:f,endgold:h,setEndgold:y,signature:z,setSignature:re,subtitle:i,setSubtitle:p,title:ie,setTitle:se,ourTeam:O,setOurTeam:F,body:$,setBody:X,titleFont:M,setTitleFont:_,bodyFont:ne,setBodyFont:R,formatList:ge,voyageNumber:b,setVoyageNumber:P,formatDiscordMessage:we,isModalOpen:k,setIsModalOpen:A,isCopyModalOpen:D,setIsCopyModalOpen:w,ancientCoins:L,setAncientCoins:W,fishCaught:E,setFishCaught:I,parchment:g,setParchment:G,frame:j,setFrame:C,dives:x,updateDive:J,removeDive:B,addNewDive:te,resetState:Y,loadTestingData:()=>{const ae=[{id:"1",name:"John Blackhook",discord:"123456789",rank:"Admiral",role:"Helm",isRep:!1},{id:"2",name:"Ruper Ironside",discord:"234567890",rank:"Captain",role:"Cannons",isRep:!1},{id:"3",name:"Dirk Wavecrest",discord:"345678901",rank:"Lieutenant",role:"Carpenter",isRep:!1},{id:"4",name:"Jorg Stormbreaker",discord:"456789012",rank:"Seaman",role:"Flex",isRep:!1},{id:"5",name:"Erik Saltbeard",discord:"567890123",rank:"Marine",role:"Helm",isRep:!0}];H==="patrol"?(P("5"),X("Set sail at dawn under favorable winds. Encountered three merchant vessels and one skeleton galleon. All encounters resolved favorably. Crew performed excellently throughout the expedition. Returned to port with full holds and morale high."),re(ae[0].id),r(`Merchant Vessel Encountered
Skeleton Galleon Vanquished
Kraken Tentacle Spotted
Legendary Treasure Map Found`),l("5,250"),s("180"),f("1,000"),y("6,250"),W("25"),I("12")):(P("3"),X("Competed in intense skirmish battles against rival crews. Team displayed exceptional coordination and tactical prowess. Multiple close matches showcased the skill of our sailors."),re(ae[0].id),F("Athena"),T([{ourTeam:"Athena",enemyTeam:"Reaper",outcome:"win",notes:"Superior cannon work and smart positioning"},{ourTeam:"Athena",enemyTeam:"Reaper",outcome:"loss",notes:"Caught off guard by their anchor strategy"},{ourTeam:"Athena",enemyTeam:"Reaper",outcome:"win",notes:"Excellent teamwork, clean victory"}])),u(JSON.stringify(ae)),setTimeout(()=>{u("[]"),setTimeout(()=>{u(JSON.stringify(ae))},10)},10)}}}var Je={exports:{}};const dt=ze(qe),ut=ze(et);/*!
 * html2pdf.js v0.10.2
 * Copyright (c) 2024 Erik Koopmans
 * Released under the MIT License.
 */(function(H,Q){(function(se,$){H.exports=$(dt,ut)})(self,function(ie,se){return function(){var $={"./src/plugin/hyperlinks.js":function(i,p,e){e.r(p),e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),e("./node_modules/core-js/modules/es.string.link.js");var o=e("./src/worker.js"),n=e("./src/utils.js"),r=[],d={toContainer:o.default.prototype.toContainer,toPdf:o.default.prototype.toPdf};o.default.prototype.toContainer=function(){return d.toContainer.call(this).then(function(){if(this.opt.enableLinks){var l=this.prop.container,a=l.querySelectorAll("a"),s=(0,n.unitConvert)(l.getBoundingClientRect(),this.prop.pageSize.k);r=[],Array.prototype.forEach.call(a,function(c){for(var f=c.getClientRects(),h=0;h<f.length;h++){var y=(0,n.unitConvert)(f[h],this.prop.pageSize.k);y.left-=s.left,y.top-=s.top;var O=Math.floor(y.top/this.prop.pageSize.inner.height)+1,F=this.opt.margin[0]+y.top%this.prop.pageSize.inner.height,x=this.opt.margin[1]+y.left;r.push({page:O,top:F,left:x,clientRect:y,link:c})}},this)}})},o.default.prototype.toPdf=function(){return d.toPdf.call(this).then(function(){if(this.opt.enableLinks){r.forEach(function(a){this.prop.pdf.setPage(a.page),this.prop.pdf.link(a.left,a.top,a.clientRect.width,a.clientRect.height,{url:a.link.href})},this);var l=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(l)}})}},"./src/plugin/jspdf-plugin.js":function(i,p,e){e.r(p),e("./node_modules/core-js/modules/es.symbol.js"),e("./node_modules/core-js/modules/es.symbol.description.js"),e("./node_modules/core-js/modules/es.object.to-string.js"),e("./node_modules/core-js/modules/es.symbol.iterator.js"),e("./node_modules/core-js/modules/es.array.iterator.js"),e("./node_modules/core-js/modules/es.string.iterator.js"),e("./node_modules/core-js/modules/web.dom-collections.iterator.js");var o=e("jspdf");function n(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(u){return typeof u}:n=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n(r)}o.jsPDF.getPageSize=function(r,d,u){if(n(r)==="object"){var m=r;r=m.orientation,d=m.unit||d,u=m.format||u}d=d||"mm",u=u||"a4",r=(""+(r||"P")).toLowerCase();var l=(""+u).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":var s=1;break;case"mm":var s=72/25.4;break;case"cm":var s=72/2.54;break;case"in":var s=72;break;case"px":var s=72/96;break;case"pc":var s=12;break;case"em":var s=12;break;case"ex":var s=6;break;default:throw"Invalid unit: "+d}if(a.hasOwnProperty(l))var c=a[l][1]/s,f=a[l][0]/s;else try{var c=u[1],f=u[0]}catch{throw new Error("Invalid format: "+u)}if(r==="p"||r==="portrait"){if(r="p",f>c){var h=f;f=c,c=h}}else if(r==="l"||r==="landscape"){if(r="l",c>f){var h=f;f=c,c=h}}else throw"Invalid orientation: "+r;var y={width:f,height:c,unit:d,k:s};return y},p.default=o.jsPDF},"./src/plugin/pagebreaks.js":function(i,p,e){e.r(p),e("./node_modules/core-js/modules/es.array.concat.js"),e("./node_modules/core-js/modules/es.array.slice.js"),e("./node_modules/core-js/modules/es.array.join.js"),e("./node_modules/core-js/modules/web.dom-collections.for-each.js"),e("./node_modules/core-js/modules/es.object.keys.js");var o=e("./src/worker.js"),n=e("./src/utils.js"),r={toContainer:o.default.prototype.toContainer};o.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},o.default.prototype.toContainer=function(){return r.toContainer.call(this).then(function(){var m=this.prop.container,l=this.prop.pageSize.inner.px.height,a=[].concat(this.opt.pagebreak.mode),s={avoidAll:a.indexOf("avoid-all")!==-1,css:a.indexOf("css")!==-1,legacy:a.indexOf("legacy")!==-1},c={},f=this;["before","after","avoid"].forEach(function(O){var F=s.avoidAll&&O==="avoid";c[O]=F?[]:[].concat(f.opt.pagebreak[O]||[]),c[O].length>0&&(c[O]=Array.prototype.slice.call(m.querySelectorAll(c[O].join(", "))))});var h=m.querySelectorAll(".html2pdf__page-break");h=Array.prototype.slice.call(h);var y=m.querySelectorAll("*");Array.prototype.forEach.call(y,function(F){var x={before:!1,after:s.legacy&&h.indexOf(F)!==-1,avoid:s.avoidAll};if(s.css){var T=window.getComputedStyle(F),k=["always","page","left","right"],A=["avoid","avoid-page"];x={before:x.before||k.indexOf(T.breakBefore||T.pageBreakBefore)!==-1,after:x.after||k.indexOf(T.breakAfter||T.pageBreakAfter)!==-1,avoid:x.avoid||A.indexOf(T.breakInside||T.pageBreakInside)!==-1}}Object.keys(x).forEach(function(R){x[R]=x[R]||c[R].indexOf(F)!==-1});var D=F.getBoundingClientRect();if(x.avoid&&!x.before){var w=Math.floor(D.top/l),M=Math.floor(D.bottom/l),_=Math.abs(D.bottom-D.top)/l;M!==w&&_<=1&&(x.before=!0)}if(x.before){var ne=(0,n.createElement)("div",{style:{display:"block",height:l-D.top%l+"px"}});F.parentNode.insertBefore(ne,F)}if(x.after){var ne=(0,n.createElement)("div",{style:{display:"block",height:l-D.bottom%l+"px"}});F.parentNode.insertBefore(ne,F.nextSibling)}})})}},"./src/utils.js":function(i,p,e){e.r(p),e.d(p,{objType:function(){return n},createElement:function(){return r},cloneNode:function(){return d},unitConvert:function(){return u},toPx:function(){return m}}),e("./node_modules/core-js/modules/es.number.constructor.js"),e("./node_modules/core-js/modules/es.symbol.js"),e("./node_modules/core-js/modules/es.symbol.description.js"),e("./node_modules/core-js/modules/es.object.to-string.js"),e("./node_modules/core-js/modules/es.symbol.iterator.js"),e("./node_modules/core-js/modules/es.array.iterator.js"),e("./node_modules/core-js/modules/es.string.iterator.js"),e("./node_modules/core-js/modules/web.dom-collections.iterator.js");function o(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(s){return typeof s}:o=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},o(l)}var n=function(a){var s=o(a);return s==="undefined"?"undefined":s==="string"||a instanceof String?"string":s==="number"||a instanceof Number?"number":s==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":s==="object"?"object":"unknown"},r=function(a,s){var c=document.createElement(a);if(s.className&&(c.className=s.className),s.innerHTML){c.innerHTML=s.innerHTML;for(var f=c.getElementsByTagName("script"),h=f.length;h-- >0;null)f[h].parentNode.removeChild(f[h])}for(var y in s.style)c.style[y]=s.style[y];return c},d=function l(a,s){for(var c=a.nodeType===3?document.createTextNode(a.nodeValue):a.cloneNode(!1),f=a.firstChild;f;f=f.nextSibling)(s===!0||f.nodeType!==1||f.nodeName!=="SCRIPT")&&c.appendChild(l(f,s));return a.nodeType===1&&(a.nodeName==="CANVAS"?(c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,0,0)):(a.nodeName==="TEXTAREA"||a.nodeName==="SELECT")&&(c.value=a.value),c.addEventListener("load",function(){c.scrollTop=a.scrollTop,c.scrollLeft=a.scrollLeft},!0)),c},u=function(a,s){if(n(a)==="number")return a*72/96/s;var c={};for(var f in a)c[f]=a[f]*72/96/s;return c},m=function(a,s){return Math.floor(a*s/72*96)}},"./src/worker.js":function(i,p,e){e.r(p),e("./node_modules/core-js/modules/es.object.assign.js"),e("./node_modules/core-js/modules/es.array.map.js"),e("./node_modules/core-js/modules/es.object.keys.js"),e("./node_modules/core-js/modules/es.array.concat.js"),e("./node_modules/core-js/modules/es.object.to-string.js"),e("./node_modules/core-js/modules/es.regexp.to-string.js"),e("./node_modules/core-js/modules/es.function.name.js"),e("./node_modules/core-js/modules/web.dom-collections.for-each.js");var o=e("jspdf"),n=e("html2canvas"),r=e("./src/utils.js"),d=e("./node_modules/es6-promise/dist/es6-promise.js"),u=e.n(d),m=u().Promise,l=function a(s){var c=Object.assign(a.convert(m.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(m.resolve(),c);return f=f.setProgress(1,a,1,[a]),f=f.set(s),f};l.prototype=Object.create(m.prototype),l.prototype.constructor=l,l.convert=function(s,c){return s.__proto__=c||l.prototype,s},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},l.prototype.from=function(s,c){function f(h){switch((0,r.objType)(h)){case"string":return"string";case"element":return h.nodeName.toLowerCase&&h.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(c=c||f(s),c){case"string":return this.set({src:(0,r.createElement)("div",{innerHTML:s})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},l.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){var s=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(s).then(function(){var f={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},h={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};f.opacity=0;var y=(0,r.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,r.createElement)("div",{className:"html2pdf__overlay",style:f}),this.prop.container=(0,r.createElement)("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(y),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},l.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(function(){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,n(this.prop.container,f)}).then(function(f){var h=this.opt.html2canvas.onrendered||function(){};h(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){var s=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(s).then(function(){var f=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=f})},l.prototype.toPdf=function(){var s=[function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(s).then(function(){var f=this.prop.canvas,h=this.opt,y=f.height,O=Math.floor(f.width*this.prop.pageSize.inner.ratio),F=Math.ceil(y/O),x=this.prop.pageSize.inner.height,T=document.createElement("canvas"),k=T.getContext("2d");T.width=f.width,T.height=O,this.prop.pdf=this.prop.pdf||new o.jsPDF(h.jsPDF);for(var A=0;A<F;A++){A===F-1&&y%O!==0&&(T.height=y%O,x=T.height*this.prop.pageSize.inner.width/T.width);var D=T.width,w=T.height;k.fillStyle="white",k.fillRect(0,0,D,w),k.drawImage(f,0,A*O,D,w,0,0,D,w),A&&this.prop.pdf.addPage();var M=T.toDataURL("image/"+h.image.type,h.image.quality);this.prop.pdf.addImage(M,h.image.type,h.margin[1],h.margin[0],this.prop.pageSize.inner.width,x)}})},l.prototype.output=function(s,c,f){return f=f||"pdf",f.toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(s,c):this.outputPdf(s,c)},l.prototype.outputPdf=function(s,c){var f=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(f).then(function(){return this.prop.pdf.output(s,c)})},l.prototype.outputImg=function(s,c){var f=[function(){return this.prop.img||this.toImg()}];return this.thenList(f).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},l.prototype.save=function(s){var c=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(c).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.set=function(s){if((0,r.objType)(s)!=="object")return this;var c=Object.keys(s||{}).map(function(f){switch(f){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return f in l.template.prop?function(){this.prop[f]=s[f]}:function(){this.opt[f]=s[f]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(s,c){return this.then(function(){var h=s in l.template.prop?this.prop[s]:this.opt[s];return c?c(h):h})},l.prototype.setMargin=function(s){return this.then(function(){switch((0,r.objType)(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},l.prototype.setPageSize=function(s){return this.then(function(){s=s||o.jsPDF.getPageSize(this.opt.jsPDF),s.hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:(0,r.toPx)(s.inner.width,s.k),height:(0,r.toPx)(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},l.prototype.setProgress=function(s,c,f,h){return s!=null&&(this.progress.val=s),c!=null&&(this.progress.state=c),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(s,c,f,h){return this.setProgress(s?this.progress.val+s:null,c||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},l.prototype.then=function(s,c){var f=this;return this.thenCore(s,c,function(y,O){return f.updateProgress(null,null,1,[y]),m.prototype.then.call(this,function(x){return f.updateProgress(null,y),x}).then(y,O).then(function(x){return f.updateProgress(1),x})})},l.prototype.thenCore=function(s,c,f){f=f||m.prototype.then;var h=this;s&&(s=s.bind(h)),c&&(c=c.bind(h));var y=m.toString().indexOf("[native code]")!==-1&&m.name==="Promise",O=y?h:l.convert(Object.assign({},h),m.prototype),F=f.call(O,s,c);return l.convert(F,h.__proto__)},l.prototype.thenExternal=function(s,c){return m.prototype.then.call(this,s,c)},l.prototype.thenList=function(s){var c=this;return s.forEach(function(h){c=c.thenCore(h)}),c},l.prototype.catch=function(a){a&&(a=a.bind(this));var s=m.prototype.catch.call(this,a);return l.convert(s,this)},l.prototype.catchExternal=function(s){return m.prototype.catch.call(this,s)},l.prototype.error=function(s){return this.then(function(){throw new Error(s)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,p.default=l},"./node_modules/core-js/internals/a-function.js":function(i){i.exports=function(p){if(typeof p!="function")throw TypeError(String(p)+" is not a function");return p}},"./node_modules/core-js/internals/a-possible-prototype.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-object.js");i.exports=function(n){if(!o(n)&&n!==null)throw TypeError("Can't set "+String(n)+" as a prototype");return n}},"./node_modules/core-js/internals/add-to-unscopables.js":function(i,p,e){var o=e("./node_modules/core-js/internals/well-known-symbol.js"),n=e("./node_modules/core-js/internals/object-create.js"),r=e("./node_modules/core-js/internals/object-define-property.js"),d=o("unscopables"),u=Array.prototype;u[d]==null&&r.f(u,d,{configurable:!0,value:n(null)}),i.exports=function(m){u[d][m]=!0}},"./node_modules/core-js/internals/an-object.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-object.js");i.exports=function(n){if(!o(n))throw TypeError(String(n)+" is not an object");return n}},"./node_modules/core-js/internals/array-for-each.js":function(i,p,e){var o=e("./node_modules/core-js/internals/array-iteration.js").forEach,n=e("./node_modules/core-js/internals/array-method-is-strict.js"),r=n("forEach");i.exports=r?[].forEach:function(u){return o(this,u,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-indexed-object.js"),n=e("./node_modules/core-js/internals/to-length.js"),r=e("./node_modules/core-js/internals/to-absolute-index.js"),d=function(u){return function(m,l,a){var s=o(m),c=n(s.length),f=r(a,c),h;if(u&&l!=l){for(;c>f;)if(h=s[f++],h!=h)return!0}else for(;c>f;f++)if((u||f in s)&&s[f]===l)return u||f||0;return!u&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(i,p,e){var o=e("./node_modules/core-js/internals/function-bind-context.js"),n=e("./node_modules/core-js/internals/indexed-object.js"),r=e("./node_modules/core-js/internals/to-object.js"),d=e("./node_modules/core-js/internals/to-length.js"),u=e("./node_modules/core-js/internals/array-species-create.js"),m=[].push,l=function(a){var s=a==1,c=a==2,f=a==3,h=a==4,y=a==6,O=a==7,F=a==5||y;return function(x,T,k,A){for(var D=r(x),w=n(D),M=o(T,k,3),_=d(w.length),ne=0,R=A||u,g=s?R(x,_):c||O?R(x,0):void 0,G,j;_>ne;ne++)if((F||ne in w)&&(G=w[ne],j=M(G,ne,D),a))if(s)g[ne]=j;else if(j)switch(a){case 3:return!0;case 5:return G;case 6:return ne;case 2:m.call(g,G)}else switch(a){case 4:return!1;case 7:m.call(g,G)}return y?-1:f||h?h:g}};i.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js"),n=e("./node_modules/core-js/internals/well-known-symbol.js"),r=e("./node_modules/core-js/internals/engine-v8-version.js"),d=n("species");i.exports=function(u){return r>=51||!o(function(){var m=[],l=m.constructor={};return l[d]=function(){return{foo:1}},m[u](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js");i.exports=function(n,r){var d=[][n];return!!d&&o(function(){d.call(null,r||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-object.js"),n=e("./node_modules/core-js/internals/is-array.js"),r=e("./node_modules/core-js/internals/well-known-symbol.js"),d=r("species");i.exports=function(u){var m;return n(u)&&(m=u.constructor,typeof m=="function"&&(m===Array||n(m.prototype))?m=void 0:o(m)&&(m=m[d],m===null&&(m=void 0))),m===void 0?Array:m}},"./node_modules/core-js/internals/array-species-create.js":function(i,p,e){var o=e("./node_modules/core-js/internals/array-species-constructor.js");i.exports=function(n,r){return new(o(n))(r===0?0:r)}},"./node_modules/core-js/internals/classof-raw.js":function(i){var p={}.toString;i.exports=function(e){return p.call(e).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-string-tag-support.js"),n=e("./node_modules/core-js/internals/classof-raw.js"),r=e("./node_modules/core-js/internals/well-known-symbol.js"),d=r("toStringTag"),u=n(function(){return arguments}())=="Arguments",m=function(l,a){try{return l[a]}catch{}};i.exports=o?n:function(l){var a,s,c;return l===void 0?"Undefined":l===null?"Null":typeof(s=m(a=Object(l),d))=="string"?s:u?n(a):(c=n(a))=="Object"&&typeof a.callee=="function"?"Arguments":c}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(i,p,e){var o=e("./node_modules/core-js/internals/has.js"),n=e("./node_modules/core-js/internals/own-keys.js"),r=e("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),d=e("./node_modules/core-js/internals/object-define-property.js");i.exports=function(u,m){for(var l=n(m),a=d.f,s=r.f,c=0;c<l.length;c++){var f=l[c];o(u,f)||a(u,f,s(m,f))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js");i.exports=!o(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},"./node_modules/core-js/internals/create-html.js":function(i,p,e){var o=e("./node_modules/core-js/internals/require-object-coercible.js"),n=e("./node_modules/core-js/internals/to-string.js"),r=/"/g;i.exports=function(d,u,m,l){var a=n(o(d)),s="<"+u;return m!==""&&(s+=" "+m+'="'+n(l).replace(r,"&quot;")+'"'),s+">"+a+"</"+u+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(i,p,e){var o=e("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,n=e("./node_modules/core-js/internals/object-create.js"),r=e("./node_modules/core-js/internals/create-property-descriptor.js"),d=e("./node_modules/core-js/internals/set-to-string-tag.js"),u=e("./node_modules/core-js/internals/iterators.js"),m=function(){return this};i.exports=function(l,a,s){var c=a+" Iterator";return l.prototype=n(o,{next:r(1,s)}),d(l,c,!1,!0),u[c]=m,l}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/object-define-property.js"),r=e("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=o?function(d,u,m){return n.f(d,u,r(1,m))}:function(d,u,m){return d[u]=m,d}},"./node_modules/core-js/internals/create-property-descriptor.js":function(i){i.exports=function(p,e){return{enumerable:!(p&1),configurable:!(p&2),writable:!(p&4),value:e}}},"./node_modules/core-js/internals/create-property.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-property-key.js"),n=e("./node_modules/core-js/internals/object-define-property.js"),r=e("./node_modules/core-js/internals/create-property-descriptor.js");i.exports=function(d,u,m){var l=o(u);l in d?n.f(d,l,r(0,m)):d[l]=m}},"./node_modules/core-js/internals/define-iterator.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/create-iterator-constructor.js"),r=e("./node_modules/core-js/internals/object-get-prototype-of.js"),d=e("./node_modules/core-js/internals/object-set-prototype-of.js"),u=e("./node_modules/core-js/internals/set-to-string-tag.js"),m=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),l=e("./node_modules/core-js/internals/redefine.js"),a=e("./node_modules/core-js/internals/well-known-symbol.js"),s=e("./node_modules/core-js/internals/is-pure.js"),c=e("./node_modules/core-js/internals/iterators.js"),f=e("./node_modules/core-js/internals/iterators-core.js"),h=f.IteratorPrototype,y=f.BUGGY_SAFARI_ITERATORS,O=a("iterator"),F="keys",x="values",T="entries",k=function(){return this};i.exports=function(A,D,w,M,_,ne,R){n(w,D,M);var g=function(U){if(U===_&&P)return P;if(!y&&U in C)return C[U];switch(U){case F:return function(){return new w(this,U)};case x:return function(){return new w(this,U)};case T:return function(){return new w(this,U)}}return function(){return new w(this)}},G=D+" Iterator",j=!1,C=A.prototype,b=C[O]||C["@@iterator"]||_&&C[_],P=!y&&b||g(_),L=D=="Array"&&C.entries||b,W,E,I;if(L&&(W=r(L.call(new A)),h!==Object.prototype&&W.next&&(!s&&r(W)!==h&&(d?d(W,h):typeof W[O]!="function"&&m(W,O,k)),u(W,G,!0,!0),s&&(c[G]=k))),_==x&&b&&b.name!==x&&(j=!0,P=function(){return b.call(this)}),(!s||R)&&C[O]!==P&&m(C,O,P),c[D]=P,_)if(E={values:g(x),keys:ne?P:g(F),entries:g(T)},R)for(I in E)(y||j||!(I in C))&&l(C,I,E[I]);else o({target:D,proto:!0,forced:y||j},E);return E}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(i,p,e){var o=e("./node_modules/core-js/internals/path.js"),n=e("./node_modules/core-js/internals/has.js"),r=e("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),d=e("./node_modules/core-js/internals/object-define-property.js").f;i.exports=function(u){var m=o.Symbol||(o.Symbol={});n(m,u)||d(m,u,{value:r.f(u)})}},"./node_modules/core-js/internals/descriptors.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js");i.exports=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/is-object.js"),r=o.document,d=n(r)&&n(r.createElement);i.exports=function(u){return d?r.createElement(u):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(i){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(i,p,e){var o=e("./node_modules/core-js/internals/get-built-in.js");i.exports=o("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/engine-user-agent.js"),r=o.process,d=o.Deno,u=r&&r.versions||d&&d.version,m=u&&u.v8,l,a;m?(l=m.split("."),a=l[0]<4?1:l[0]+l[1]):n&&(l=n.match(/Edge\/(\d+)/),(!l||l[1]>=74)&&(l=n.match(/Chrome\/(\d+)/),l&&(a=l[1]))),i.exports=a&&+a},"./node_modules/core-js/internals/enum-bug-keys.js":function(i){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,r=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),d=e("./node_modules/core-js/internals/redefine.js"),u=e("./node_modules/core-js/internals/set-global.js"),m=e("./node_modules/core-js/internals/copy-constructor-properties.js"),l=e("./node_modules/core-js/internals/is-forced.js");i.exports=function(a,s){var c=a.target,f=a.global,h=a.stat,y,O,F,x,T,k;if(f?O=o:h?O=o[c]||u(c,{}):O=(o[c]||{}).prototype,O)for(F in s){if(T=s[F],a.noTargetGet?(k=n(O,F),x=k&&k.value):x=O[F],y=l(f?F:c+(h?".":"#")+F,a.forced),!y&&x!==void 0){if(typeof T==typeof x)continue;m(T,x)}(a.sham||x&&x.sham)&&r(T,"sham",!0),d(O,F,T,a)}}},"./node_modules/core-js/internals/fails.js":function(i){i.exports=function(p){try{return!!p()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(i,p,e){var o=e("./node_modules/core-js/internals/a-function.js");i.exports=function(n,r,d){if(o(n),r===void 0)return n;switch(d){case 0:return function(){return n.call(r)};case 1:return function(u){return n.call(r,u)};case 2:return function(u,m){return n.call(r,u,m)};case 3:return function(u,m,l){return n.call(r,u,m,l)}}return function(){return n.apply(r,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=function(r){return typeof r=="function"?r:void 0};i.exports=function(r,d){return arguments.length<2?n(o[r]):o[r]&&o[r][d]}},"./node_modules/core-js/internals/global.js":function(i){var p=function(e){return e&&e.Math==Math&&e};i.exports=p(typeof globalThis=="object"&&globalThis)||p(typeof window=="object"&&window)||p(typeof self=="object"&&self)||p(typeof Le=="object"&&Le)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-object.js"),n={}.hasOwnProperty;i.exports=Object.hasOwn||function(d,u){return n.call(o(d),u)}},"./node_modules/core-js/internals/hidden-keys.js":function(i){i.exports={}},"./node_modules/core-js/internals/html.js":function(i,p,e){var o=e("./node_modules/core-js/internals/get-built-in.js");i.exports=o("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/fails.js"),r=e("./node_modules/core-js/internals/document-create-element.js");i.exports=!o&&!n(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js"),n=e("./node_modules/core-js/internals/classof-raw.js"),r="".split;i.exports=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return n(d)=="String"?r.call(d,""):Object(d)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-object.js"),n=e("./node_modules/core-js/internals/object-set-prototype-of.js");i.exports=function(r,d,u){var m,l;return n&&typeof(m=d.constructor)=="function"&&m!==u&&o(l=m.prototype)&&l!==u.prototype&&n(r,l),r}},"./node_modules/core-js/internals/inspect-source.js":function(i,p,e){var o=e("./node_modules/core-js/internals/shared-store.js"),n=Function.toString;typeof o.inspectSource!="function"&&(o.inspectSource=function(r){return n.call(r)}),i.exports=o.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(i,p,e){var o=e("./node_modules/core-js/internals/native-weak-map.js"),n=e("./node_modules/core-js/internals/global.js"),r=e("./node_modules/core-js/internals/is-object.js"),d=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),u=e("./node_modules/core-js/internals/has.js"),m=e("./node_modules/core-js/internals/shared-store.js"),l=e("./node_modules/core-js/internals/shared-key.js"),a=e("./node_modules/core-js/internals/hidden-keys.js"),s="Object already initialized",c=n.WeakMap,f,h,y,O=function(w){return y(w)?h(w):f(w,{})},F=function(w){return function(M){var _;if(!r(M)||(_=h(M)).type!==w)throw TypeError("Incompatible receiver, "+w+" required");return _}};if(o||m.state){var x=m.state||(m.state=new c),T=x.get,k=x.has,A=x.set;f=function(w,M){if(k.call(x,w))throw new TypeError(s);return M.facade=w,A.call(x,w,M),M},h=function(w){return T.call(x,w)||{}},y=function(w){return k.call(x,w)}}else{var D=l("state");a[D]=!0,f=function(w,M){if(u(w,D))throw new TypeError(s);return M.facade=w,d(w,D,M),M},h=function(w){return u(w,D)?w[D]:{}},y=function(w){return u(w,D)}}i.exports={set:f,get:h,has:y,enforce:O,getterFor:F}},"./node_modules/core-js/internals/is-array.js":function(i,p,e){var o=e("./node_modules/core-js/internals/classof-raw.js");i.exports=Array.isArray||function(r){return o(r)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js"),n=/#|\.prototype\./,r=function(a,s){var c=u[d(a)];return c==l?!0:c==m?!1:typeof s=="function"?o(s):!!s},d=r.normalize=function(a){return String(a).replace(n,".").toLowerCase()},u=r.data={},m=r.NATIVE="N",l=r.POLYFILL="P";i.exports=r},"./node_modules/core-js/internals/is-object.js":function(i){i.exports=function(p){return typeof p=="object"?p!==null:typeof p=="function"}},"./node_modules/core-js/internals/is-pure.js":function(i){i.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(i,p,e){var o=e("./node_modules/core-js/internals/get-built-in.js"),n=e("./node_modules/core-js/internals/use-symbol-as-uid.js");i.exports=n?function(r){return typeof r=="symbol"}:function(r){var d=o("Symbol");return typeof d=="function"&&Object(r)instanceof d}},"./node_modules/core-js/internals/iterators-core.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js"),n=e("./node_modules/core-js/internals/object-get-prototype-of.js"),r=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),d=e("./node_modules/core-js/internals/has.js"),u=e("./node_modules/core-js/internals/well-known-symbol.js"),m=e("./node_modules/core-js/internals/is-pure.js"),l=u("iterator"),a=!1,s=function(){return this},c,f,h;[].keys&&(h=[].keys(),"next"in h?(f=n(n(h)),f!==Object.prototype&&(c=f)):a=!0);var y=c==null||o(function(){var O={};return c[l].call(O)!==O});y&&(c={}),(!m||y)&&!d(c,l)&&r(c,l,s),i.exports={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:a}},"./node_modules/core-js/internals/iterators.js":function(i){i.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(i,p,e){var o=e("./node_modules/core-js/internals/engine-v8-version.js"),n=e("./node_modules/core-js/internals/fails.js");i.exports=!!Object.getOwnPropertySymbols&&!n(function(){var r=Symbol();return!String(r)||!(Object(r)instanceof Symbol)||!Symbol.sham&&o&&o<41})},"./node_modules/core-js/internals/native-weak-map.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/inspect-source.js"),r=o.WeakMap;i.exports=typeof r=="function"&&/native code/.test(n(r))},"./node_modules/core-js/internals/object-assign.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/fails.js"),r=e("./node_modules/core-js/internals/object-keys.js"),d=e("./node_modules/core-js/internals/object-get-own-property-symbols.js"),u=e("./node_modules/core-js/internals/object-property-is-enumerable.js"),m=e("./node_modules/core-js/internals/to-object.js"),l=e("./node_modules/core-js/internals/indexed-object.js"),a=Object.assign,s=Object.defineProperty;i.exports=!a||n(function(){if(o&&a({b:1},a(s({},"a",{enumerable:!0,get:function(){s(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var c={},f={},h=Symbol(),y="abcdefghijklmnopqrst";return c[h]=7,y.split("").forEach(function(O){f[O]=O}),a({},c)[h]!=7||r(a({},f)).join("")!=y})?function(f,h){for(var y=m(f),O=arguments.length,F=1,x=d.f,T=u.f;O>F;)for(var k=l(arguments[F++]),A=x?r(k).concat(x(k)):r(k),D=A.length,w=0,M;D>w;)M=A[w++],(!o||T.call(k,M))&&(y[M]=k[M]);return y}:a},"./node_modules/core-js/internals/object-create.js":function(i,p,e){var o=e("./node_modules/core-js/internals/an-object.js"),n=e("./node_modules/core-js/internals/object-define-properties.js"),r=e("./node_modules/core-js/internals/enum-bug-keys.js"),d=e("./node_modules/core-js/internals/hidden-keys.js"),u=e("./node_modules/core-js/internals/html.js"),m=e("./node_modules/core-js/internals/document-create-element.js"),l=e("./node_modules/core-js/internals/shared-key.js"),a=">",s="<",c="prototype",f="script",h=l("IE_PROTO"),y=function(){},O=function(A){return s+f+a+A+s+"/"+f+a},F=function(A){A.write(O("")),A.close();var D=A.parentWindow.Object;return A=null,D},x=function(){var A=m("iframe"),D="java"+f+":",w;if(A.style)return A.style.display="none",u.appendChild(A),A.src=String(D),w=A.contentWindow.document,w.open(),w.write(O("document.F=Object")),w.close(),w.F},T,k=function(){try{T=new ActiveXObject("htmlfile")}catch{}k=document.domain&&T?F(T):x()||F(T);for(var A=r.length;A--;)delete k[c][r[A]];return k()};d[h]=!0,i.exports=Object.create||function(D,w){var M;return D!==null?(y[c]=o(D),M=new y,y[c]=null,M[h]=D):M=k(),w===void 0?M:n(M,w)}},"./node_modules/core-js/internals/object-define-properties.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/object-define-property.js"),r=e("./node_modules/core-js/internals/an-object.js"),d=e("./node_modules/core-js/internals/object-keys.js");i.exports=o?Object.defineProperties:function(m,l){r(m);for(var a=d(l),s=a.length,c=0,f;s>c;)n.f(m,f=a[c++],l[f]);return m}},"./node_modules/core-js/internals/object-define-property.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/ie8-dom-define.js"),r=e("./node_modules/core-js/internals/an-object.js"),d=e("./node_modules/core-js/internals/to-property-key.js"),u=Object.defineProperty;p.f=o?u:function(l,a,s){if(r(l),a=d(a),r(s),n)try{return u(l,a,s)}catch{}if("get"in s||"set"in s)throw TypeError("Accessors not supported");return"value"in s&&(l[a]=s.value),l}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/object-property-is-enumerable.js"),r=e("./node_modules/core-js/internals/create-property-descriptor.js"),d=e("./node_modules/core-js/internals/to-indexed-object.js"),u=e("./node_modules/core-js/internals/to-property-key.js"),m=e("./node_modules/core-js/internals/has.js"),l=e("./node_modules/core-js/internals/ie8-dom-define.js"),a=Object.getOwnPropertyDescriptor;p.f=o?a:function(c,f){if(c=d(c),f=u(f),l)try{return a(c,f)}catch{}if(m(c,f))return r(!n.f.call(c,f),c[f])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-indexed-object.js"),n=e("./node_modules/core-js/internals/object-get-own-property-names.js").f,r={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(m){try{return n(m)}catch{return d.slice()}};i.exports.f=function(l){return d&&r.call(l)=="[object Window]"?u(l):n(o(l))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(i,p,e){var o=e("./node_modules/core-js/internals/object-keys-internal.js"),n=e("./node_modules/core-js/internals/enum-bug-keys.js"),r=n.concat("length","prototype");p.f=Object.getOwnPropertyNames||function(u){return o(u,r)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(i,p){p.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(i,p,e){var o=e("./node_modules/core-js/internals/has.js"),n=e("./node_modules/core-js/internals/to-object.js"),r=e("./node_modules/core-js/internals/shared-key.js"),d=e("./node_modules/core-js/internals/correct-prototype-getter.js"),u=r("IE_PROTO"),m=Object.prototype;i.exports=d?Object.getPrototypeOf:function(l){return l=n(l),o(l,u)?l[u]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?m:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(i,p,e){var o=e("./node_modules/core-js/internals/has.js"),n=e("./node_modules/core-js/internals/to-indexed-object.js"),r=e("./node_modules/core-js/internals/array-includes.js").indexOf,d=e("./node_modules/core-js/internals/hidden-keys.js");i.exports=function(u,m){var l=n(u),a=0,s=[],c;for(c in l)!o(d,c)&&o(l,c)&&s.push(c);for(;m.length>a;)o(l,c=m[a++])&&(~r(s,c)||s.push(c));return s}},"./node_modules/core-js/internals/object-keys.js":function(i,p,e){var o=e("./node_modules/core-js/internals/object-keys-internal.js"),n=e("./node_modules/core-js/internals/enum-bug-keys.js");i.exports=Object.keys||function(d){return o(d,n)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(i,p){var e={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,n=o&&!e.call({1:2},1);p.f=n?function(d){var u=o(this,d);return!!u&&u.enumerable}:e},"./node_modules/core-js/internals/object-set-prototype-of.js":function(i,p,e){var o=e("./node_modules/core-js/internals/an-object.js"),n=e("./node_modules/core-js/internals/a-possible-prototype.js");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var r=!1,d={},u;try{u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,u.call(d,[]),r=d instanceof Array}catch{}return function(l,a){return o(l),n(a),r?u.call(l,a):l.__proto__=a,l}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-string-tag-support.js"),n=e("./node_modules/core-js/internals/classof.js");i.exports=o?{}.toString:function(){return"[object "+n(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-object.js");i.exports=function(n,r){var d,u;if(r==="string"&&typeof(d=n.toString)=="function"&&!o(u=d.call(n))||typeof(d=n.valueOf)=="function"&&!o(u=d.call(n))||r!=="string"&&typeof(d=n.toString)=="function"&&!o(u=d.call(n)))return u;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(i,p,e){var o=e("./node_modules/core-js/internals/get-built-in.js"),n=e("./node_modules/core-js/internals/object-get-own-property-names.js"),r=e("./node_modules/core-js/internals/object-get-own-property-symbols.js"),d=e("./node_modules/core-js/internals/an-object.js");i.exports=o("Reflect","ownKeys")||function(m){var l=n.f(d(m)),a=r.f;return a?l.concat(a(m)):l}},"./node_modules/core-js/internals/path.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js");i.exports=o},"./node_modules/core-js/internals/redefine.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),r=e("./node_modules/core-js/internals/has.js"),d=e("./node_modules/core-js/internals/set-global.js"),u=e("./node_modules/core-js/internals/inspect-source.js"),m=e("./node_modules/core-js/internals/internal-state.js"),l=m.get,a=m.enforce,s=String(String).split("String");(i.exports=function(c,f,h,y){var O=y?!!y.unsafe:!1,F=y?!!y.enumerable:!1,x=y?!!y.noTargetGet:!1,T;if(typeof h=="function"&&(typeof f=="string"&&!r(h,"name")&&n(h,"name",f),T=a(h),T.source||(T.source=s.join(typeof f=="string"?f:""))),c===o){F?c[f]=h:d(f,h);return}else O?!x&&c[f]&&(F=!0):delete c[f];F?c[f]=h:n(c,f,h)})(Function.prototype,"toString",function(){return typeof this=="function"&&l(this).source||u(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(i,p,e){var o=e("./node_modules/core-js/internals/an-object.js");i.exports=function(){var n=o(this),r="";return n.global&&(r+="g"),n.ignoreCase&&(r+="i"),n.multiline&&(r+="m"),n.dotAll&&(r+="s"),n.unicode&&(r+="u"),n.sticky&&(r+="y"),r}},"./node_modules/core-js/internals/require-object-coercible.js":function(i){i.exports=function(p){if(p==null)throw TypeError("Can't call method on "+p);return p}},"./node_modules/core-js/internals/set-global.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js");i.exports=function(n,r){try{Object.defineProperty(o,n,{value:r,configurable:!0,writable:!0})}catch{o[n]=r}return r}},"./node_modules/core-js/internals/set-to-string-tag.js":function(i,p,e){var o=e("./node_modules/core-js/internals/object-define-property.js").f,n=e("./node_modules/core-js/internals/has.js"),r=e("./node_modules/core-js/internals/well-known-symbol.js"),d=r("toStringTag");i.exports=function(u,m,l){u&&!n(u=l?u:u.prototype,d)&&o(u,d,{configurable:!0,value:m})}},"./node_modules/core-js/internals/shared-key.js":function(i,p,e){var o=e("./node_modules/core-js/internals/shared.js"),n=e("./node_modules/core-js/internals/uid.js"),r=o("keys");i.exports=function(d){return r[d]||(r[d]=n(d))}},"./node_modules/core-js/internals/shared-store.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/set-global.js"),r="__core-js_shared__",d=o[r]||n(r,{});i.exports=d},"./node_modules/core-js/internals/shared.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-pure.js"),n=e("./node_modules/core-js/internals/shared-store.js");(i.exports=function(r,d){return n[r]||(n[r]=d!==void 0?d:{})})("versions",[]).push({version:"3.16.0",mode:o?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(i,p,e){var o=e("./node_modules/core-js/internals/fails.js");i.exports=function(n){return o(function(){var r=""[n]('"');return r!==r.toLowerCase()||r.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-integer.js"),n=e("./node_modules/core-js/internals/to-string.js"),r=e("./node_modules/core-js/internals/require-object-coercible.js"),d=function(u){return function(m,l){var a=n(r(m)),s=o(l),c=a.length,f,h;return s<0||s>=c?u?"":void 0:(f=a.charCodeAt(s),f<55296||f>56319||s+1===c||(h=a.charCodeAt(s+1))<56320||h>57343?u?a.charAt(s):f:u?a.slice(s,s+2):(f-55296<<10)+(h-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"./node_modules/core-js/internals/string-trim.js":function(i,p,e){var o=e("./node_modules/core-js/internals/require-object-coercible.js"),n=e("./node_modules/core-js/internals/to-string.js"),r=e("./node_modules/core-js/internals/whitespaces.js"),d="["+r+"]",u=RegExp("^"+d+d+"*"),m=RegExp(d+d+"*$"),l=function(a){return function(s){var c=n(o(s));return a&1&&(c=c.replace(u,"")),a&2&&(c=c.replace(m,"")),c}};i.exports={start:l(1),end:l(2),trim:l(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-integer.js"),n=Math.max,r=Math.min;i.exports=function(d,u){var m=o(d);return m<0?n(m+u,0):r(m,u)}},"./node_modules/core-js/internals/to-indexed-object.js":function(i,p,e){var o=e("./node_modules/core-js/internals/indexed-object.js"),n=e("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(r){return o(n(r))}},"./node_modules/core-js/internals/to-integer.js":function(i){var p=Math.ceil,e=Math.floor;i.exports=function(o){return isNaN(o=+o)?0:(o>0?e:p)(o)}},"./node_modules/core-js/internals/to-length.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-integer.js"),n=Math.min;i.exports=function(r){return r>0?n(o(r),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(i,p,e){var o=e("./node_modules/core-js/internals/require-object-coercible.js");i.exports=function(n){return Object(o(n))}},"./node_modules/core-js/internals/to-primitive.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-object.js"),n=e("./node_modules/core-js/internals/is-symbol.js"),r=e("./node_modules/core-js/internals/ordinary-to-primitive.js"),d=e("./node_modules/core-js/internals/well-known-symbol.js"),u=d("toPrimitive");i.exports=function(m,l){if(!o(m)||n(m))return m;var a=m[u],s;if(a!==void 0){if(l===void 0&&(l="default"),s=a.call(m,l),!o(s)||n(s))return s;throw TypeError("Can't convert object to primitive value")}return l===void 0&&(l="number"),r(m,l)}},"./node_modules/core-js/internals/to-property-key.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-primitive.js"),n=e("./node_modules/core-js/internals/is-symbol.js");i.exports=function(r){var d=o(r,"string");return n(d)?d:String(d)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(i,p,e){var o=e("./node_modules/core-js/internals/well-known-symbol.js"),n=o("toStringTag"),r={};r[n]="z",i.exports=String(r)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(i,p,e){var o=e("./node_modules/core-js/internals/is-symbol.js");i.exports=function(n){if(o(n))throw TypeError("Cannot convert a Symbol value to a string");return String(n)}},"./node_modules/core-js/internals/uid.js":function(i){var p=0,e=Math.random();i.exports=function(o){return"Symbol("+String(o===void 0?"":o)+")_"+(++p+e).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(i,p,e){var o=e("./node_modules/core-js/internals/native-symbol.js");i.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(i,p,e){var o=e("./node_modules/core-js/internals/well-known-symbol.js");p.f=o},"./node_modules/core-js/internals/well-known-symbol.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/shared.js"),r=e("./node_modules/core-js/internals/has.js"),d=e("./node_modules/core-js/internals/uid.js"),u=e("./node_modules/core-js/internals/native-symbol.js"),m=e("./node_modules/core-js/internals/use-symbol-as-uid.js"),l=n("wks"),a=o.Symbol,s=m?a:a&&a.withoutSetter||d;i.exports=function(c){return(!r(l,c)||!(u||typeof l[c]=="string"))&&(u&&r(a,c)?l[c]=a[c]:l[c]=s("Symbol."+c)),l[c]}},"./node_modules/core-js/internals/whitespaces.js":function(i){i.exports=`	
\v\f\r \u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/fails.js"),r=e("./node_modules/core-js/internals/is-array.js"),d=e("./node_modules/core-js/internals/is-object.js"),u=e("./node_modules/core-js/internals/to-object.js"),m=e("./node_modules/core-js/internals/to-length.js"),l=e("./node_modules/core-js/internals/create-property.js"),a=e("./node_modules/core-js/internals/array-species-create.js"),s=e("./node_modules/core-js/internals/array-method-has-species-support.js"),c=e("./node_modules/core-js/internals/well-known-symbol.js"),f=e("./node_modules/core-js/internals/engine-v8-version.js"),h=c("isConcatSpreadable"),y=9007199254740991,O="Maximum allowed index exceeded",F=f>=51||!n(function(){var A=[];return A[h]=!1,A.concat()[0]!==A}),x=s("concat"),T=function(A){if(!d(A))return!1;var D=A[h];return D!==void 0?!!D:r(A)},k=!F||!x;o({target:"Array",proto:!0,forced:k},{concat:function(D){var w=u(this),M=a(w,0),_=0,ne,R,g,G,j;for(ne=-1,g=arguments.length;ne<g;ne++)if(j=ne===-1?w:arguments[ne],T(j)){if(G=m(j.length),_+G>y)throw TypeError(O);for(R=0;R<G;R++,_++)R in j&&l(M,_,j[R])}else{if(_>=y)throw TypeError(O);l(M,_++,j)}return M.length=_,M}})},"./node_modules/core-js/modules/es.array.iterator.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-indexed-object.js"),n=e("./node_modules/core-js/internals/add-to-unscopables.js"),r=e("./node_modules/core-js/internals/iterators.js"),d=e("./node_modules/core-js/internals/internal-state.js"),u=e("./node_modules/core-js/internals/define-iterator.js"),m="Array Iterator",l=d.set,a=d.getterFor(m);i.exports=u(Array,"Array",function(s,c){l(this,{type:m,target:o(s),index:0,kind:c})},function(){var s=a(this),c=s.target,f=s.kind,h=s.index++;return!c||h>=c.length?(s.target=void 0,{value:void 0,done:!0}):f=="keys"?{value:h,done:!1}:f=="values"?{value:c[h],done:!1}:{value:[h,c[h]],done:!1}},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},"./node_modules/core-js/modules/es.array.join.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/indexed-object.js"),r=e("./node_modules/core-js/internals/to-indexed-object.js"),d=e("./node_modules/core-js/internals/array-method-is-strict.js"),u=[].join,m=n!=Object,l=d("join",",");o({target:"Array",proto:!0,forced:m||!l},{join:function(s){return u.call(r(this),s===void 0?",":s)}})},"./node_modules/core-js/modules/es.array.map.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/array-iteration.js").map,r=e("./node_modules/core-js/internals/array-method-has-species-support.js"),d=r("map");o({target:"Array",proto:!0,forced:!d},{map:function(m){return n(this,m,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/is-object.js"),r=e("./node_modules/core-js/internals/is-array.js"),d=e("./node_modules/core-js/internals/to-absolute-index.js"),u=e("./node_modules/core-js/internals/to-length.js"),m=e("./node_modules/core-js/internals/to-indexed-object.js"),l=e("./node_modules/core-js/internals/create-property.js"),a=e("./node_modules/core-js/internals/well-known-symbol.js"),s=e("./node_modules/core-js/internals/array-method-has-species-support.js"),c=s("slice"),f=a("species"),h=[].slice,y=Math.max;o({target:"Array",proto:!0,forced:!c},{slice:function(F,x){var T=m(this),k=u(T.length),A=d(F,k),D=d(x===void 0?k:x,k),w,M,_;if(r(T)&&(w=T.constructor,typeof w=="function"&&(w===Array||r(w.prototype))?w=void 0:n(w)&&(w=w[f],w===null&&(w=void 0)),w===Array||w===void 0))return h.call(T,A,D);for(M=new(w===void 0?Array:w)(y(D-A,0)),_=0;A<D;A++,_++)A in T&&l(M,_,T[A]);return M.length=_,M}})},"./node_modules/core-js/modules/es.function.name.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/object-define-property.js").f,r=Function.prototype,d=r.toString,u=/^\s*function ([^ (]*)/,m="name";o&&!(m in r)&&n(r,m,{configurable:!0,get:function(){try{return d.call(this).match(u)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(i,p,e){var o=e("./node_modules/core-js/internals/descriptors.js"),n=e("./node_modules/core-js/internals/global.js"),r=e("./node_modules/core-js/internals/is-forced.js"),d=e("./node_modules/core-js/internals/redefine.js"),u=e("./node_modules/core-js/internals/has.js"),m=e("./node_modules/core-js/internals/classof-raw.js"),l=e("./node_modules/core-js/internals/inherit-if-required.js"),a=e("./node_modules/core-js/internals/is-symbol.js"),s=e("./node_modules/core-js/internals/to-primitive.js"),c=e("./node_modules/core-js/internals/fails.js"),f=e("./node_modules/core-js/internals/object-create.js"),h=e("./node_modules/core-js/internals/object-get-own-property-names.js").f,y=e("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,O=e("./node_modules/core-js/internals/object-define-property.js").f,F=e("./node_modules/core-js/internals/string-trim.js").trim,x="Number",T=n[x],k=T.prototype,A=m(f(k))==x,D=function(R){if(a(R))throw TypeError("Cannot convert a Symbol value to a number");var g=s(R,"number"),G,j,C,b,P,L,W,E;if(typeof g=="string"&&g.length>2){if(g=F(g),G=g.charCodeAt(0),G===43||G===45){if(j=g.charCodeAt(2),j===88||j===120)return NaN}else if(G===48){switch(g.charCodeAt(1)){case 66:case 98:C=2,b=49;break;case 79:case 111:C=8,b=55;break;default:return+g}for(P=g.slice(2),L=P.length,W=0;W<L;W++)if(E=P.charCodeAt(W),E<48||E>b)return NaN;return parseInt(P,C)}}return+g};if(r(x,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var w=function(g){var G=arguments.length<1?0:g,j=this;return j instanceof w&&(A?c(function(){k.valueOf.call(j)}):m(j)!=x)?l(new T(D(G)),j,w):D(G)},M=o?h(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_=0,ne;M.length>_;_++)u(T,ne=M[_])&&!u(w,ne)&&O(w,ne,y(T,ne));w.prototype=k,k.constructor=w,d(n,x,w)}},"./node_modules/core-js/modules/es.object.assign.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/object-assign.js");o({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},"./node_modules/core-js/modules/es.object.keys.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/to-object.js"),r=e("./node_modules/core-js/internals/object-keys.js"),d=e("./node_modules/core-js/internals/fails.js"),u=d(function(){r(1)});o({target:"Object",stat:!0,forced:u},{keys:function(l){return r(n(l))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(i,p,e){var o=e("./node_modules/core-js/internals/to-string-tag-support.js"),n=e("./node_modules/core-js/internals/redefine.js"),r=e("./node_modules/core-js/internals/object-to-string.js");o||n(Object.prototype,"toString",r,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(i,p,e){var o=e("./node_modules/core-js/internals/redefine.js"),n=e("./node_modules/core-js/internals/an-object.js"),r=e("./node_modules/core-js/internals/to-string.js"),d=e("./node_modules/core-js/internals/fails.js"),u=e("./node_modules/core-js/internals/regexp-flags.js"),m="toString",l=RegExp.prototype,a=l[m],s=d(function(){return a.call({source:"a",flags:"b"})!="/a/b"}),c=a.name!=m;(s||c)&&o(RegExp.prototype,m,function(){var h=n(this),y=r(h.source),O=h.flags,F=r(O===void 0&&h instanceof RegExp&&!("flags"in l)?u.call(h):O);return"/"+y+"/"+F},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(i,p,e){var o=e("./node_modules/core-js/internals/string-multibyte.js").charAt,n=e("./node_modules/core-js/internals/to-string.js"),r=e("./node_modules/core-js/internals/internal-state.js"),d=e("./node_modules/core-js/internals/define-iterator.js"),u="String Iterator",m=r.set,l=r.getterFor(u);d(String,"String",function(a){m(this,{type:u,string:n(a),index:0})},function(){var s=l(this),c=s.string,f=s.index,h;return f>=c.length?{value:void 0,done:!0}:(h=o(c,f),s.index+=h.length,{value:h,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/create-html.js"),r=e("./node_modules/core-js/internals/string-html-forced.js");o({target:"String",proto:!0,forced:r("link")},{link:function(u){return n(this,"a","href",u)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/descriptors.js"),r=e("./node_modules/core-js/internals/global.js"),d=e("./node_modules/core-js/internals/has.js"),u=e("./node_modules/core-js/internals/is-object.js"),m=e("./node_modules/core-js/internals/object-define-property.js").f,l=e("./node_modules/core-js/internals/copy-constructor-properties.js"),a=r.Symbol;if(n&&typeof a=="function"&&(!("description"in a.prototype)||a().description!==void 0)){var s={},c=function(){var x=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),T=this instanceof c?new a(x):x===void 0?a():a(x);return x===""&&(s[T]=!0),T};l(c,a);var f=c.prototype=a.prototype;f.constructor=c;var h=f.toString,y=String(a("test"))=="Symbol(test)",O=/^Symbol\((.*)\)[^)]+$/;m(f,"description",{configurable:!0,get:function(){var x=u(this)?this.valueOf():this,T=h.call(x);if(d(s,x))return"";var k=y?T.slice(7,-1):T.replace(O,"$1");return k===""?void 0:k}}),o({global:!0,forced:!0},{Symbol:c})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(i,p,e){var o=e("./node_modules/core-js/internals/define-well-known-symbol.js");o("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(i,p,e){var o=e("./node_modules/core-js/internals/export.js"),n=e("./node_modules/core-js/internals/global.js"),r=e("./node_modules/core-js/internals/get-built-in.js"),d=e("./node_modules/core-js/internals/is-pure.js"),u=e("./node_modules/core-js/internals/descriptors.js"),m=e("./node_modules/core-js/internals/native-symbol.js"),l=e("./node_modules/core-js/internals/fails.js"),a=e("./node_modules/core-js/internals/has.js"),s=e("./node_modules/core-js/internals/is-array.js"),c=e("./node_modules/core-js/internals/is-object.js"),f=e("./node_modules/core-js/internals/is-symbol.js"),h=e("./node_modules/core-js/internals/an-object.js"),y=e("./node_modules/core-js/internals/to-object.js"),O=e("./node_modules/core-js/internals/to-indexed-object.js"),F=e("./node_modules/core-js/internals/to-property-key.js"),x=e("./node_modules/core-js/internals/to-string.js"),T=e("./node_modules/core-js/internals/create-property-descriptor.js"),k=e("./node_modules/core-js/internals/object-create.js"),A=e("./node_modules/core-js/internals/object-keys.js"),D=e("./node_modules/core-js/internals/object-get-own-property-names.js"),w=e("./node_modules/core-js/internals/object-get-own-property-names-external.js"),M=e("./node_modules/core-js/internals/object-get-own-property-symbols.js"),_=e("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),ne=e("./node_modules/core-js/internals/object-define-property.js"),R=e("./node_modules/core-js/internals/object-property-is-enumerable.js"),g=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),G=e("./node_modules/core-js/internals/redefine.js"),j=e("./node_modules/core-js/internals/shared.js"),C=e("./node_modules/core-js/internals/shared-key.js"),b=e("./node_modules/core-js/internals/hidden-keys.js"),P=e("./node_modules/core-js/internals/uid.js"),L=e("./node_modules/core-js/internals/well-known-symbol.js"),W=e("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),E=e("./node_modules/core-js/internals/define-well-known-symbol.js"),I=e("./node_modules/core-js/internals/set-to-string-tag.js"),U=e("./node_modules/core-js/internals/internal-state.js"),te=e("./node_modules/core-js/internals/array-iteration.js").forEach,J=C("hidden"),B="Symbol",Y="prototype",ge=L("toPrimitive"),Se=U.set,we=U.getterFor(B),he=Object[Y],ye=n.Symbol,ae=r("JSON","stringify"),de=_.f,ue=ne.f,je=w.f,Pe=R.f,xe=j("symbols"),Ne=j("op-symbols"),Ee=j("string-to-symbol-registry"),ve=j("symbol-to-string-registry"),pe=j("wks"),v=n.QObject,S=!v||!v[Y]||!v[Y].findChild,N=u&&l(function(){return k(ue({},"a",{get:function(){return ue(this,"a",{value:7}).a}})).a!=7})?function(ce,K,ee){var le=de(he,K);le&&delete he[K],ue(ce,K,ee),le&&ce!==he&&ue(he,K,le)}:ue,V=function(ce,K){var ee=xe[ce]=k(ye[Y]);return Se(ee,{type:B,tag:ce,description:K}),u||(ee.description=K),ee},Z=function(K,ee,le){K===he&&Z(Ne,ee,le),h(K);var me=F(ee);return h(le),a(xe,me)?(le.enumerable?(a(K,J)&&K[J][me]&&(K[J][me]=!1),le=k(le,{enumerable:T(0,!1)})):(a(K,J)||ue(K,J,T(1,{})),K[J][me]=!0),N(K,me,le)):ue(K,me,le)},oe=function(K,ee){h(K);var le=O(ee),me=A(le).concat(Ie(le));return te(me,function(Ce){(!u||Oe.call(le,Ce))&&Z(K,Ce,le[Ce])}),K},be=function(K,ee){return ee===void 0?k(K):oe(k(K),ee)},Oe=function(K){var ee=F(K),le=Pe.call(this,ee);return this===he&&a(xe,ee)&&!a(Ne,ee)?!1:le||!a(this,ee)||!a(xe,ee)||a(this,J)&&this[J][ee]?le:!0},Te=function(K,ee){var le=O(K),me=F(ee);if(!(le===he&&a(xe,me)&&!a(Ne,me))){var Ce=de(le,me);return Ce&&a(xe,me)&&!(a(le,J)&&le[J][me])&&(Ce.enumerable=!0),Ce}},Re=function(K){var ee=je(O(K)),le=[];return te(ee,function(me){!a(xe,me)&&!a(b,me)&&le.push(me)}),le},Ie=function(K){var ee=K===he,le=je(ee?Ne:O(K)),me=[];return te(le,function(Ce){a(xe,Ce)&&(!ee||a(he,Ce))&&me.push(xe[Ce])}),me};if(m||(ye=function(){if(this instanceof ye)throw TypeError("Symbol is not a constructor");var K=!arguments.length||arguments[0]===void 0?void 0:x(arguments[0]),ee=P(K),le=function(me){this===he&&le.call(Ne,me),a(this,J)&&a(this[J],ee)&&(this[J][ee]=!1),N(this,ee,T(1,me))};return u&&S&&N(he,ee,{configurable:!0,set:le}),V(ee,K)},G(ye[Y],"toString",function(){return we(this).tag}),G(ye,"withoutSetter",function(ce){return V(P(ce),ce)}),R.f=Oe,ne.f=Z,_.f=Te,D.f=w.f=Re,M.f=Ie,W.f=function(ce){return V(L(ce),ce)},u&&(ue(ye[Y],"description",{configurable:!0,get:function(){return we(this).description}}),d||G(he,"propertyIsEnumerable",Oe,{unsafe:!0}))),o({global:!0,wrap:!0,forced:!m,sham:!m},{Symbol:ye}),te(A(pe),function(ce){E(ce)}),o({target:B,stat:!0,forced:!m},{for:function(ce){var K=x(ce);if(a(Ee,K))return Ee[K];var ee=ye(K);return Ee[K]=ee,ve[ee]=K,ee},keyFor:function(K){if(!f(K))throw TypeError(K+" is not a symbol");if(a(ve,K))return ve[K]},useSetter:function(){S=!0},useSimple:function(){S=!1}}),o({target:"Object",stat:!0,forced:!m,sham:!u},{create:be,defineProperty:Z,defineProperties:oe,getOwnPropertyDescriptor:Te}),o({target:"Object",stat:!0,forced:!m},{getOwnPropertyNames:Re,getOwnPropertySymbols:Ie}),o({target:"Object",stat:!0,forced:l(function(){M.f(1)})},{getOwnPropertySymbols:function(K){return M.f(y(K))}}),ae){var Xe=!m||l(function(){var ce=ye();return ae([ce])!="[null]"||ae({a:ce})!="{}"||ae(Object(ce))!="{}"});o({target:"JSON",stat:!0,forced:Xe},{stringify:function(K,ee,le){for(var me=[K],Ce=1,$e;arguments.length>Ce;)me.push(arguments[Ce++]);if($e=ee,!(!c(ee)&&K===void 0||f(K)))return s(ee)||(ee=function(Qe,Fe){if(typeof $e=="function"&&(Fe=$e.call(this,Qe,Fe)),!f(Fe))return Fe}),me[1]=ee,ae.apply(null,me)}})}ye[Y][ge]||g(ye[Y],ge,ye[Y].valueOf),I(ye,B),b[J]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/dom-iterables.js"),r=e("./node_modules/core-js/internals/array-for-each.js"),d=e("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var u in n){var m=o[u],l=m&&m.prototype;if(l&&l.forEach!==r)try{d(l,"forEach",r)}catch{l.forEach=r}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(i,p,e){var o=e("./node_modules/core-js/internals/global.js"),n=e("./node_modules/core-js/internals/dom-iterables.js"),r=e("./node_modules/core-js/modules/es.array.iterator.js"),d=e("./node_modules/core-js/internals/create-non-enumerable-property.js"),u=e("./node_modules/core-js/internals/well-known-symbol.js"),m=u("iterator"),l=u("toStringTag"),a=r.values;for(var s in n){var c=o[s],f=c&&c.prototype;if(f){if(f[m]!==a)try{d(f,m,a)}catch{f[m]=a}if(f[l]||d(f,l,s),n[s]){for(var h in r)if(f[h]!==r[h])try{d(f,h,r[h])}catch{f[h]=r[h]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(i){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(p,e){i.exports=e()})(this,function(){function p(v){var S=typeof v;return v!==null&&(S==="object"||S==="function")}function e(v){return typeof v=="function"}var o=void 0;Array.isArray?o=Array.isArray:o=function(v){return Object.prototype.toString.call(v)==="[object Array]"};var n=o,r=0,d=void 0,u=void 0,m=function(S,N){A[r]=S,A[r+1]=N,r+=2,r===2&&(u?u(D):M())};function l(v){u=v}function a(v){m=v}var s=typeof window<"u"?window:void 0,c=s||{},f=c.MutationObserver||c.WebKitMutationObserver,h=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",y=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function O(){return function(){return process.nextTick(D)}}function F(){return typeof d<"u"?function(){d(D)}:k()}function x(){var v=0,S=new f(D),N=document.createTextNode("");return S.observe(N,{characterData:!0}),function(){N.data=v=++v%2}}function T(){var v=new MessageChannel;return v.port1.onmessage=D,function(){return v.port2.postMessage(0)}}function k(){var v=setTimeout;return function(){return v(D,1)}}var A=new Array(1e3);function D(){for(var v=0;v<r;v+=2){var S=A[v],N=A[v+1];S(N),A[v]=void 0,A[v+1]=void 0}r=0}function w(){try{var v=Function("return this")().require("vertx");return d=v.runOnLoop||v.runOnContext,F()}catch{return k()}}var M=void 0;h?M=O():f?M=x():y?M=T():s===void 0?M=w():M=k();function _(v,S){var N=this,V=new this.constructor(g);V[R]===void 0&&ae(V);var Z=N._state;if(Z){var oe=arguments[Z-1];m(function(){return Se(Z,V,oe,N._result)})}else Y(N,V,v,S);return V}function ne(v){var S=this;if(v&&typeof v=="object"&&v.constructor===S)return v;var N=new S(g);return U(N,v),N}var R=Math.random().toString(36).substring(2);function g(){}var G=void 0,j=1,C=2;function b(){return new TypeError("You cannot resolve a promise with itself")}function P(){return new TypeError("A promises callback cannot return that same promise.")}function L(v,S,N,V){try{v.call(S,N,V)}catch(Z){return Z}}function W(v,S,N){m(function(V){var Z=!1,oe=L(N,S,function(be){Z||(Z=!0,S!==be?U(V,be):J(V,be))},function(be){Z||(Z=!0,B(V,be))},"Settle: "+(V._label||" unknown promise"));!Z&&oe&&(Z=!0,B(V,oe))},v)}function E(v,S){S._state===j?J(v,S._result):S._state===C?B(v,S._result):Y(S,void 0,function(N){return U(v,N)},function(N){return B(v,N)})}function I(v,S,N){S.constructor===v.constructor&&N===_&&S.constructor.resolve===ne?E(v,S):N===void 0?J(v,S):e(N)?W(v,S,N):J(v,S)}function U(v,S){if(v===S)B(v,b());else if(p(S)){var N=void 0;try{N=S.then}catch(V){B(v,V);return}I(v,S,N)}else J(v,S)}function te(v){v._onerror&&v._onerror(v._result),ge(v)}function J(v,S){v._state===G&&(v._result=S,v._state=j,v._subscribers.length!==0&&m(ge,v))}function B(v,S){v._state===G&&(v._state=C,v._result=S,m(te,v))}function Y(v,S,N,V){var Z=v._subscribers,oe=Z.length;v._onerror=null,Z[oe]=S,Z[oe+j]=N,Z[oe+C]=V,oe===0&&v._state&&m(ge,v)}function ge(v){var S=v._subscribers,N=v._state;if(S.length!==0){for(var V=void 0,Z=void 0,oe=v._result,be=0;be<S.length;be+=3)V=S[be],Z=S[be+N],V?Se(N,V,Z,oe):Z(oe);v._subscribers.length=0}}function Se(v,S,N,V){var Z=e(N),oe=void 0,be=void 0,Oe=!0;if(Z){try{oe=N(V)}catch(Te){Oe=!1,be=Te}if(S===oe){B(S,P());return}}else oe=V;S._state!==G||(Z&&Oe?U(S,oe):Oe===!1?B(S,be):v===j?J(S,oe):v===C&&B(S,oe))}function we(v,S){try{S(function(V){U(v,V)},function(V){B(v,V)})}catch(N){B(v,N)}}var he=0;function ye(){return he++}function ae(v){v[R]=he++,v._state=void 0,v._result=void 0,v._subscribers=[]}function de(){return new Error("Array Methods must be provided an Array")}var ue=function(){function v(S,N){this._instanceConstructor=S,this.promise=new S(g),this.promise[R]||ae(this.promise),n(N)?(this.length=N.length,this._remaining=N.length,this._result=new Array(this.length),this.length===0?J(this.promise,this._result):(this.length=this.length||0,this._enumerate(N),this._remaining===0&&J(this.promise,this._result))):B(this.promise,de())}return v.prototype._enumerate=function(N){for(var V=0;this._state===G&&V<N.length;V++)this._eachEntry(N[V],V)},v.prototype._eachEntry=function(N,V){var Z=this._instanceConstructor,oe=Z.resolve;if(oe===ne){var be=void 0,Oe=void 0,Te=!1;try{be=N.then}catch(Ie){Te=!0,Oe=Ie}if(be===_&&N._state!==G)this._settledAt(N._state,V,N._result);else if(typeof be!="function")this._remaining--,this._result[V]=N;else if(Z===ve){var Re=new Z(g);Te?B(Re,Oe):I(Re,N,be),this._willSettleAt(Re,V)}else this._willSettleAt(new Z(function(Ie){return Ie(N)}),V)}else this._willSettleAt(oe(N),V)},v.prototype._settledAt=function(N,V,Z){var oe=this.promise;oe._state===G&&(this._remaining--,N===C?B(oe,Z):this._result[V]=Z),this._remaining===0&&J(oe,this._result)},v.prototype._willSettleAt=function(N,V){var Z=this;Y(N,void 0,function(oe){return Z._settledAt(j,V,oe)},function(oe){return Z._settledAt(C,V,oe)})},v}();function je(v){return new ue(this,v).promise}function Pe(v){var S=this;return n(v)?new S(function(N,V){for(var Z=v.length,oe=0;oe<Z;oe++)S.resolve(v[oe]).then(N,V)}):new S(function(N,V){return V(new TypeError("You must pass an array to race."))})}function xe(v){var S=this,N=new S(g);return B(N,v),N}function Ne(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ve=function(){function v(S){this[R]=ye(),this._result=this._state=void 0,this._subscribers=[],g!==S&&(typeof S!="function"&&Ne(),this instanceof v?we(this,S):Ee())}return v.prototype.catch=function(N){return this.then(null,N)},v.prototype.finally=function(N){var V=this,Z=V.constructor;return e(N)?V.then(function(oe){return Z.resolve(N()).then(function(){return oe})},function(oe){return Z.resolve(N()).then(function(){throw oe})}):V.then(N,N)},v}();ve.prototype.then=_,ve.all=je,ve.race=Pe,ve.resolve=ne,ve.reject=xe,ve._setScheduler=l,ve._setAsap=a,ve._asap=m;function pe(){var v=void 0;if(typeof Le<"u")v=Le;else if(typeof self<"u")v=self;else try{v=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var S=v.Promise;if(S){var N=null;try{N=Object.prototype.toString.call(S.resolve())}catch{}if(N==="[object Promise]"&&!S.cast)return}v.Promise=ve}return ve.polyfill=pe,ve.Promise=ve,ve})},html2canvas:function(i){i.exports=se},jspdf:function(i){i.exports=ie}},X={};function z(i){var p=X[i];if(p!==void 0)return p.exports;var e=X[i]={exports:{}};return $[i].call(e.exports,e,e.exports,z),e.exports}(function(){z.n=function(i){var p=i&&i.__esModule?function(){return i.default}:function(){return i};return z.d(p,{a:p}),p}})(),function(){z.d=function(i,p){for(var e in p)z.o(p,e)&&!z.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:p[e]})}}(),function(){z.o=function(i,p){return Object.prototype.hasOwnProperty.call(i,p)}}(),function(){z.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})}}();var re={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/z.r(re);var i=z("./src/worker.js");z("./src/plugin/jspdf-plugin.js"),z("./src/plugin/pagebreaks.js"),z("./src/plugin/hyperlinks.js");var p=function e(o,n){var r=new e.Worker(n);return o?r.from(o).save():r};p.Worker=i.default,re.default=p}(),re=re.default,re}()})})(Je);var mt=Je.exports;const ft=_e(mt),pt=({title:H,activePageIndex:Q,setActivePageIndex:ie,pages:se,formatDiscordMessage:$})=>{const X=(p,e="png")=>`${H?H.replace(/\s+/g,"-"):"Voyage_Log"}_page${p+1}.${e}`;return{generatePDF:async()=>{const p=Q;for(let e=0;e<se.length;e++){ie(e),await new Promise(d=>setTimeout(d,100));const o=document.getElementById("visible-page");if(!o)continue;const r={margin:0,filename:X(e,"pdf"),image:{type:"jpeg",quality:.98},html2canvas:{scale:2,width:816,height:1056},jsPDF:{unit:"px",format:[816,1056],orientation:"portrait"}};await ft().set(r).from(o).save()}ie(p)},generateImages:async()=>{const p=Q;for(let e=0;e<se.length;e++){ie(e),await new Promise(r=>setTimeout(r,100));const o=document.getElementById("visible-page");if(!o)continue;(await tt(o,{scale:2,useCORS:!0})).toBlob(r=>{if(r){const d=URL.createObjectURL(r),u=document.createElement("a");u.href=d,u.download=X(e,"png"),u.click(),URL.revokeObjectURL(d)}},"image/png")}ie(p)},copyToClipboard:()=>{navigator.clipboard.writeText($()),alert("Copied to clipboard!")}}},Ye=q.createContext(void 0),ht=({children:H})=>{const Q=ct(),[ie,se]=q.useState(0),[$]=q.useState([]),{generatePDF:X,generateImages:z,copyToClipboard:re}=pt({title:Q.title,activePageIndex:ie,setActivePageIndex:se,pages:$,formatDiscordMessage:Q.formatDiscordMessage}),i={...Q,generatePDF:X,generateImages:z,copyToClipboard:re};return t.jsx(Ye.Provider,{value:i,children:H})},Me=()=>{const H=q.useContext(Ye);if(H===void 0)throw new Error("useLog must be used within a LogProvider");return H},jt=()=>{const{isModalOpen:H,setIsModalOpen:Q,titleFont:ie,bodyFont:se,setTitleFont:$,setBodyFont:X,parchment:z,setParchment:re,frame:i,setFrame:p,loadTestingData:e}=Me(),o=()=>Q(!1);return H?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50 p-4",children:t.jsxs("div",{className:"bg-[#2a2a2a] p-6 rounded-lg shadow-lg w-full max-w-md text-white max-h-[90vh] overflow-y-auto",children:[t.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Settings"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title Font"}),t.jsxs("select",{value:ie,onChange:n=>$(n.target.value),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"Charm",children:"Charm (Default)"}),t.jsx("option",{value:"Quintessential",children:"Quintessential"}),t.jsx("option",{value:"Felipa",children:"Felipa"}),t.jsx("option",{value:"Parisienne",children:"Parisienne"}),t.jsx("option",{value:"Jim Nightshade",children:"Jim Nightshade"}),t.jsx("option",{value:"Niconne",children:"Niconne"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Log Entry Font"}),t.jsxs("select",{value:se,onChange:n=>X(n.target.value),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"Charm",children:"Charm (Default)"}),t.jsx("option",{value:"Quintessential",children:"Quintessential"}),t.jsx("option",{value:"Felipa",children:"Felipa"}),t.jsx("option",{value:"Parisienne",children:"Parisienne"}),t.jsx("option",{value:"Jim Nightshade",children:"Jim Nightshade"}),t.jsx("option",{value:"Niconne",children:"Niconne"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Parchment"}),t.jsxs("select",{value:z,onChange:n=>re(Number(n.target.value)),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 text-white",children:[t.jsx("option",{value:1,children:"1"}),t.jsx("option",{value:2,children:"2"}),t.jsx("option",{value:3,children:"3"}),t.jsx("option",{value:4,children:"4"}),t.jsx("option",{value:5,children:"5"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frame"}),t.jsxs("select",{value:i,onChange:n=>p(Number(n.target.value)),className:"w-full p-2 bg-gray-700 rounded border border-gray-600 text-white",children:[t.jsx("option",{value:0,children:"None"}),t.jsx("option",{value:1,children:"1"}),t.jsx("option",{value:2,children:"2"}),t.jsx("option",{value:3,children:"3"}),t.jsx("option",{value:4,children:"4"}),t.jsx("option",{value:5,children:"5"})]})]})]}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 sm:justify-between",children:[t.jsx("button",{onClick:()=>{e(),o()},className:"bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-2 px-4 rounded w-full sm:w-auto",children:"Load Testing Data"}),t.jsx("button",{onClick:o,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded w-full sm:w-auto",children:"Close"})]})]})}):null},vt=()=>{const{isCopyModalOpen:H,setIsCopyModalOpen:Q,formatDiscordMessage:ie,copyToClipboard:se}=Me(),$=()=>Q(!1);return H?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex justify-center items-center z-50 px-2",children:t.jsxs("div",{className:"bg-[#2a2a2a] p-4 sm:p-6 rounded-lg shadow-lg w-full max-w-md sm:max-w-lg md:max-w-xl text-white",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4",children:"Discord Message"}),t.jsx("textarea",{className:"w-full p-2 bg-gray-700 rounded border border-gray-600 text-white h-48 sm:h-64 text-sm sm:text-base resize-none",defaultValue:ie(),readOnly:!0}),t.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row justify-end gap-2 sm:gap-4",children:[t.jsx("button",{onClick:se,className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded w-full sm:w-auto",children:"Copy"}),t.jsx("button",{onClick:$,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded w-full sm:w-auto",children:"Close"})]})]})}):null};function fe(H){const Q=globalThis.__BASE_URL__;return Q?`${Q.replace(/\/$/,"")}/${H.replace(/^\//,"")}`:`${"/logging-tool/".replace(/\/$/,"")}/${H.replace(/^\//,"")}`}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=H=>H.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ae=(H,Q)=>{const ie=q.forwardRef(({color:se="currentColor",size:$=24,strokeWidth:X=2,absoluteStrokeWidth:z,className:re="",children:i,...p},e)=>q.createElement("svg",{ref:e,...gt,width:$,height:$,stroke:se,strokeWidth:z?Number(X)*24/Number($):X,className:["lucide",`lucide-${yt(H)}`,re].join(" "),...p},[...Q.map(([o,n])=>q.createElement(o,n)),...Array.isArray(i)?i:[i]]));return ie.displayName=`${H}`,ie};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=Ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Ae("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=Ae("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Pt=({mobileMode:H,onToggleMobileMode:Q,showMobileToggle:ie=!0})=>{const{setIsModalOpen:se}=Me(),$=()=>se(!0);return t.jsxs("header",{className:"bg-[#2a2a2a] py-1 px-4 pr-8 text-center flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{className:"w-20 h-20",src:fe("USN_Logo.png"),alt:"",onError:X=>{const z=X.currentTarget;z.dataset.attempt?z.dataset.attempt==="1"&&(z.dataset.attempt="2",z.src="/USN_Logo.png"):(z.dataset.attempt="1",z.src="USN_Logo.png")}}),t.jsx("h1",{className:"text-3xl font-bold text-amber-500",children:"Voyage Log"})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[Q&&ie&&t.jsxs("button",{onClick:Q,className:`hidden md:flex items-center gap-2 px-4 py-2 rounded font-medium transition-colors ${H?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[H?t.jsx(St,{size:18}):t.jsx(Nt,{size:18}),t.jsx("span",{className:"hidden lg:inline",children:H?"Desktop":"Mobile"})]}),t.jsx("button",{onClick:$,className:"bg-gray-700 hover:bg-gray-800 text-white font-bold p-2 rounded","aria-label":"Settings",children:t.jsx(Ct,{size:20})})]})]})},Ue=()=>{const{selectedShip:H,title:Q,signature:ie,subtitle:se,mode:$,events:X,titleFont:z,bodyFont:re,parchment:i,frame:p,crew:e,gold:o,doubloons:n,ancientCoins:r,fishCaught:d,dives:u,formatList:m,body:l,voyageNumber:a}=Me(),s=R=>R===1?"parchment.png":`parchment${R}.png`,c=R=>R===0?null:`frame${R}.png`,f=()=>{const R=s(i);try{return fe(R)}catch{return R}},h=()=>{const R=c(p);if(!R)return null;try{return fe(R)}catch{return R}};let y=[];try{y=JSON.parse(e||"[]")}catch{y=[]}const O=["Recruit","Seaman","Marine","Lance Corporal","Able Seaman","Corporal","Junior Petty Officer","Staff Sergeant","Petty Officer","Gunnery Sergeant","Chief Petty Officer","Master Sergeant","Senior Chief Petty Officer","Second Lieutenant","Midshipman","Marine Captain","Lieutenant","Major","Lieutenant Commander","Lieutenant Colonel","Commander","Colonel","Captain","Brigadier General","Commodore","Major General","Rear Admiral","Vice Admiral","Admiral"];y=y.filter(R=>R.name&&R.rank).sort((R,g)=>{const G=O.indexOf(R.rank);return O.indexOf(g.rank)-G});const F={Gullinbursti:fe("ships/gullinbursti.png"),Jormungandr:fe("ships/jormungandr.png"),Freyr:fe("ships/freyr.png"),Gjallarhorn:fe("ships/gjallarhorn.png"),Odin:fe("ships/odin.png"),Skadi:fe("ships/skadi.png"),Nott:fe("ships/nott.png"),Audacious:fe("ships/audacious.png"),Berserker:fe("ships/berserker.png"),Bestla:fe("ships/bestla.png"),Ragnarok:fe("ships/ragnarok.png"),Thor:fe("ships/thor.png"),Titan:fe("ships/titan.png"),Tyr:fe("ships/tyr.png"),Valhalla:fe("ships/valhalla.png")},x={Gullinbursti:"Charging Forth, Radiant & Unyielding",Jormungandr:"Charging Forth, Radiant & Unyielding",Freyr:"Charging Forth, Radiant & Unyielding",Gjallarhorn:"Charging Forth, Radiant & Unyielding",Odin:"Charging Forth, Radiant & Unyielding",Skadi:"Charging Forth, Radiant & Unyielding",Nott:"Charging Forth, Radiant & Unyielding",Audacious:"Charging Forth, Radiant & Unyielding",Berserker:"Charging Forth, Radiant & Unyielding",Bestla:"Charging Forth, Radiant & Unyielding",Ragnarok:"Charging Forth, Radiant & Unyielding",Thor:"Charging Forth, Radiant & Unyielding",Titan:"Charging Forth, Radiant & Unyielding",Tyr:"Charging Forth, Radiant & Unyielding",Valhalla:"Charging Forth, Radiant & Unyielding"},k=(R=>{if(!R)return[""];let g=document.getElementById("log-measure-div");g||(g=document.createElement("div"),g.id="log-measure-div",g.style.position="fixed",g.style.left="-9999px",g.style.top="0",g.style.width="816px",g.style.padding="64px",g.style.fontFamily=`'${re}', cursive`,g.style.fontSize="30px",g.style.lineHeight="1.4",g.style.whiteSpace="pre-wrap",g.style.overflowWrap="break-word",g.style.wordBreak="break-word",g.style.visibility="hidden",document.body.appendChild(g));const G=1190,j=64*2,C=50,b=200,P=G-j-C,L=P-b,E=R.replace(/\r\n/g,`
`).trim().split(/\n{2,}/).map(Y=>Y.trim()).filter(Boolean),I=/[^.!?]+[.!?]+(?:\s|\n|$)|[^.!?]+$/g,U=[];for(const Y of E){const ge=Y.match(I)||[Y];for(const Se of ge){const we=Se.trim();if(we.length>200&&!/[.!?]/.test(we)){const he=we.split(/\s+/);for(const ye of he)U.push(ye)}else U.push(we)}U.push(`

`)}U.length>0&&U[U.length-1]===`

`&&U.pop();const te=[];let J="",B=!0;for(let Y=0;Y<U.length;Y++){const ge=U[Y];if(ge===`

`){J+=`

`;continue}const Se=J.length===0?ge:J+(J.endsWith(`

`)?"":" ")+ge;g.textContent=Se;const we=B?L:P;g.offsetHeight>we&&J.length>0?(te.push(J.trim()),J=ge,B=!1):J=Se}return J.length>0&&te.push(J.trim()),g&&(g.textContent=""),te.length>0?te:[""]})(l||""),A=R=>{if(R==null||R==="")return"0";const g=String(R).replace(/[^0-9.-]/g,""),G=Number(g);return Number.isFinite(G)?G.toLocaleString():R},D=12,w=$==="skirmish"?Math.max(1,Math.ceil(u.length/D)):1,M=k.length+w,_=R=>{if(!R)return"";const g=Number(R);if(!Number.isFinite(g))return R;if(g===1)return"Maiden";const G=g%100;if(G>=11&&G<=13)return`${g}th`;const j=g%10;return j===1?`${g}st`:j===2?`${g}nd`:j===3?`${g}rd`:`${g}th`},ne=(R=0)=>{const g=R<k.length,G=g?k[R]:"",j=R===0,C=R===k.length-1;let b=[],P=!1,L=!1;if(!g){const I=(R-k.length)*D,U=I+D;b=u.slice(I,U),P=R===M-1,L=R===M-1}const W=a&&H?`${_(a)} Voyage Log of the USS ${H}`:Q||"Log Title";return t.jsxs("div",{className:"rounded-lg mb-8 preview-page",style:{width:816,height:1190,boxShadow:"0 0 20px rgba(0,0,0,0.3)",position:"relative",backgroundImage:`url(${f()})`,backgroundSize:"cover",marginLeft:5,marginRight:5},children:[p>0&&h()&&t.jsx("img",{src:h(),alt:"Frame",crossOrigin:"anonymous",className:"absolute pointer-events-none",style:{top:0,left:5,width:"100%",height:"100%",objectFit:"cover",zIndex:1},onError:E=>{const I=E.currentTarget;I.dataset.attempt||(I.dataset.attempt="1",I.src=`frame${p}.png`)}}),t.jsx("img",{src:F[H],onError:E=>{const I=E.currentTarget;I.dataset.attempt?I.dataset.attempt==="1"&&(I.dataset.attempt="2",I.src="ships/gullinbursti.png"):(I.dataset.attempt="1",I.src=fe("ships/gullinbursti.png"))},alt:"Ship Logo",crossOrigin:"anonymous",className:"absolute inset-0 m-auto",style:{width:"50%",height:"auto",opacity:.2,zIndex:0}}),t.jsxs("div",{id:"writing-area",className:`p-16 h-full flex flex-col relative z-10 ${j?"":"pt-16"}`,style:{paddingBottom:"114px"},children:[j&&t.jsx("h2",{className:"text-6xl text-center ml-16 mr-16 mt-12 mb-8 whitespace-pre-wrap",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626",lineHeight:"1.3"},children:W}),g&&t.jsx("div",{className:"text-base whitespace-pre-wrap p-2",style:{fontFamily:`'${re}', cursive`,fontSize:"30px",color:"#262626",lineHeight:"1.4",overflowWrap:"break-word",wordBreak:"break-word"},children:G||"Your log entry will appear here..."}),!g&&$==="patrol"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6 ml-2 mt-8 flex-shrink-0",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-3xl mb-2",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626"},children:"Notable Events"}),t.jsx("ul",{className:"list-none text-xl",style:{fontFamily:`'${re}', cursive`,columns:1,columnGap:"1rem",breakInside:"avoid-column",color:"#262626"},children:m(X).map((E,I)=>t.jsx("li",{style:{breakInside:"avoid-column"},children:E},I))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-3xl mb-2",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626"},children:"Crew Manifest"}),t.jsxs("ul",{className:"list-none text-xl space-y-1",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:[y.length===0&&t.jsx("li",{children:"No crew assigned"}),y.map(E=>{const I=E.isRep?" [REP]":"";return t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("span",{className:"font-semibold",children:[E.rank," ",E.name,I," -"]}),t.jsx("span",{className:"ml-1",children:E.role})]},E.name)})]})]})]}),t.jsxs("div",{className:"flex justify-between items-end mt-auto pt-8 flex-shrink-0",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 pl-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:fe("gold.webp"),alt:"Gold",crossOrigin:"anonymous",className:"w-8 h-8",onError:E=>{const I=E.currentTarget;I.dataset.attempt||(I.dataset.attempt="1",I.src="gold.webp")}}),t.jsx("span",{className:"text-3xl",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:A(o)})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:fe("doubloon.webp"),alt:"Doubloons",crossOrigin:"anonymous",className:"w-8 h-8",onError:E=>{const I=E.currentTarget;I.dataset.attempt||(I.dataset.attempt="1",I.src="doubloon.webp")}}),t.jsx("span",{className:"text-3xl",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:A(n)})]}),r&&parseInt(r)>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:fe("ANCI.webp"),alt:"Ancient Coins",crossOrigin:"anonymous",className:"w-8 h-8",onError:E=>{const I=E.currentTarget;I.dataset.attempt||(I.dataset.attempt="1",I.src="ANCI.webp")}}),t.jsx("span",{className:"text-3xl",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:A(r)})]}),d&&parseInt(d)>0&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:fe("FISH.webp"),alt:"Fish",crossOrigin:"anonymous",className:"w-8 h-8",onError:E=>{const I=E.currentTarget;I.dataset.attempt||(I.dataset.attempt="1",I.src="FISH.webp")}}),t.jsx("span",{className:"text-3xl",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:A(d)})]})]}),t.jsx("div",{className:"flex-1 text-right",children:ie&&(()=>{try{const I=JSON.parse(e||"[]").find(U=>U.id===ie);if(I)return t.jsxs("div",{children:[t.jsxs("span",{className:"text-5xl",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626"},children:[I.rank," ",I.name]}),(se||x[H])&&t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"text-3xl",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:se||x[H]})})]})}catch{}return null})()})]})]}),$==="skirmish"&&(C||!g)&&(b.length>0||L)&&t.jsxs("div",{className:"p-2 flex flex-col h-full",children:[b.length>0&&t.jsxs("div",{className:`gap-6 flex-shrink-0 ${P?"grid grid-cols-2":""}`,children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-3xl mb-2",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626"},children:"Skirmish Dives"}),t.jsx("div",{className:"text-xl leading-relaxed p-2",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:t.jsx("div",{className:"grid grid-cols-1",children:b.map((E,I)=>{const te=(R-k.length)*D+I+1;return t.jsxs("div",{className:"mb-3",children:[t.jsxs("strong",{className:"flex items-center gap-2",children:[t.jsxs("span",{children:[te,"."]}),t.jsx("img",{className:"w-8 h-8",src:fe(`${E.ourTeam.toLowerCase()}.webp`),alt:"",onError:J=>{const B=J.currentTarget;B.dataset.attempt||(B.dataset.attempt="1",B.src=`${E.ourTeam.toLowerCase()}.webp`)}}),t.jsx("span",{children:E.ourTeam}),t.jsx("span",{children:"vs"}),t.jsx("span",{children:E.enemyTeam}),t.jsx("img",{className:"w-8 h-8",src:fe(`${E.enemyTeam.toLowerCase()}.webp`),alt:"",onError:J=>{const B=J.currentTarget;B.dataset.attempt||(B.dataset.attempt="1",B.src=`${E.enemyTeam.toLowerCase()}.webp`)}}),t.jsxs("span",{children:["(",E.outcome,")"]})]}),E.notes&&t.jsx("div",{className:"ml-4 italic",children:E.notes})]},I)})})})]}),P&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-3xl mb-2",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626"},children:"Crew Manifest"}),t.jsxs("ul",{className:"list-none text-xl space-y-1",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:[y.length===0&&t.jsx("li",{children:"No crew assigned"}),y.map(E=>t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("span",{className:"font-semibold",children:[E.rank," ",E.name,E.isRep?" [REP]":""," -"]}),t.jsx("span",{className:"ml-1",children:E.role})]},E.name))]})]})]}),L&&t.jsx("div",{className:"flex justify-end items-center mt-auto pt-8",children:t.jsx("div",{className:"flex-1 text-right",children:ie&&(()=>{try{const I=JSON.parse(e||"[]").find(U=>U.id===ie);if(I)return t.jsxs("div",{children:[t.jsxs("span",{className:"text-5xl",style:{fontFamily:`'${z}', cursive`,fontWeight:700,color:"#262626"},children:[I.rank," ",I.name]}),(se||x[H])&&t.jsx("div",{className:"mt-2",children:t.jsx("span",{className:"text-3xl",style:{fontFamily:`'${re}', cursive`,color:"#262626"},children:se||x[H]})})]})}catch{}return null})()})})]})]}),M>1&&t.jsx("div",{className:"absolute",style:{bottom:"58px",right:"64px",fontFamily:`'${re}', cursive`,fontSize:"22px",fontWeight:700,color:"#262626",opacity:.7,zIndex:10},children:R+1})]})};return t.jsxs("div",{className:"w-full md:w-1/2","data-testid":"log-preview",children:[t.jsx("div",{className:"md:hidden",children:t.jsx("div",{className:"w-full overflow-x-auto",children:t.jsx("div",{style:{transform:"scale(0.45)",transformOrigin:"top left"},children:Array.from({length:M}).map((R,g)=>t.jsx("div",{children:ne(g)},g))})})}),t.jsx("div",{className:"hidden md:block",children:Array.from({length:M}).map((R,g)=>t.jsx("div",{id:g===0?"visible-page":void 0,children:ne(g)},g))}),t.jsx("div",{id:"export-preview-overlay",style:{position:"absolute",top:0,left:"-9999px",pointerEvents:"none",zIndex:-1},children:Array.from({length:M}).map((R,g)=>t.jsx("div",{children:ne(g)},g))})]})},Ve=()=>{const{mode:H,setMode:Q,selectedShip:ie,setSelectedShip:se,events:$,setEvents:X,crew:z,setCrew:re,gold:i,setGold:p,doubloons:e,setDoubloons:o,startgold:n,setStartgold:r,endgold:d,setEndgold:u,ancientCoins:m,setAncientCoins:l,fishCaught:a,setFishCaught:s,dives:c,updateDive:f,removeDive:h,addNewDive:y,resetState:O,setIsCopyModalOpen:F,signature:x,setSignature:T,ourTeam:k,setOurTeam:A,body:D,setBody:w,voyageNumber:M,setVoyageNumber:_,subtitle:ne,setSubtitle:R}=Me(),[g,G]=ke.useState([{id:String(Date.now()),name:"",discord:"",rank:"",role:"",isRep:!1},{id:String(Date.now()+1),name:"",discord:"",rank:"",role:"",isRep:!1}]);return ke.useEffect(()=>{try{const j=JSON.parse(z||"[]");Array.isArray(j)&&j.length>0&&G(j)}catch{}},[]),ke.useEffect(()=>{try{re(JSON.stringify(g))}catch(j){console.error("Failed to serialize crew:",j)}},[g,re]),t.jsx("div",{className:"w-full md:w-1/2 overflow-y-auto overflow-x-hidden md:mb-96",children:t.jsx("div",{className:"w-full bg-[#2a2a2a] p-6 rounded-lg",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{children:t.jsxs("div",{className:"flex items-end gap-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{htmlFor:"ship-select",className:"block text-sm font-medium mb-2",children:"Select Ship"}),t.jsxs("select",{id:"ship-select",value:ie,onChange:j=>se(j.target.value),className:"w-full p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsxs("optgroup",{label:"Active Ships",children:[t.jsx("option",{value:"Gullinbursti",children:"Gullinbursti"}),t.jsx("option",{value:"Jormungandr",children:"Jormungandr"}),t.jsx("option",{value:"Freyr",children:"Freyr"}),t.jsx("option",{value:"Gjallarhorn",children:"Gjallarhorn"}),t.jsx("option",{value:"Odin",children:"Odin"}),t.jsx("option",{value:"Nott",children:"Nott"})]}),t.jsx("optgroup",{label:"Retired Ships",children:lt.map(j=>t.jsxs("option",{value:j,children:[j," (Retired)"]},j))})]})]}),t.jsxs("div",{className:"w-28",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Voyage #"}),t.jsx("input",{type:"number",value:M,onChange:j=>_(j.target.value),className:"w-full p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"#"})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Crew & Roles"}),t.jsxs("div",{className:"space-y-2",children:[g.map((j,C)=>t.jsxs("div",{children:[t.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[t.jsxs("select",{value:j.rank,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,rank:b.target.value}:L)),className:`w-36 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-sm ${j.rank===""?"text-gray-400":"text-white"}`,children:[t.jsx("option",{value:"",disabled:!0,children:"Rank"}),t.jsx("option",{value:"Recruit",children:"Recruit"}),t.jsx("option",{value:"Apprentice",children:"Apprentice"}),t.jsx("option",{value:"Seaman",children:"Seaman"}),t.jsx("option",{value:"Seawoman",children:"Seawoman"}),t.jsx("option",{value:"Marine",children:"Marine"}),t.jsx("option",{value:"Lance Corporal",children:"Lance Corporal"}),t.jsx("option",{value:"Able Seaman",children:"Able Seaman"}),t.jsx("option",{value:"Able Seawoman",children:"Able Seawoman"}),t.jsx("option",{value:"Corporal",children:"Corporal"}),t.jsx("option",{value:"Junior Petty Officer",children:"Junior Petty Officer"}),t.jsx("option",{value:"Staff Sergeant",children:"Staff Sergeant"}),t.jsx("option",{value:"Petty Officer",children:"Petty Officer"}),t.jsx("option",{value:"Gunnery Sergeant",children:"Gunnery Sergeant"}),t.jsx("option",{value:"Chief Petty Officer",children:"Chief Petty Officer"}),t.jsx("option",{value:"Master Sergeant",children:"Master Sergeant"}),t.jsx("option",{value:"Senior Chief Petty Officer",children:"Senior Chief Petty Officer"}),t.jsx("option",{value:"Second Lieutenant",children:"Second Lieutenant"}),t.jsx("option",{value:"Midshipman",children:"Midshipman"}),t.jsx("option",{value:"Midshipwoman",children:"Midshipwoman"}),t.jsx("option",{value:"Marine Captain",children:"Marine Captain"}),t.jsx("option",{value:"Lieutenant",children:"Lieutenant"}),t.jsx("option",{value:"Major",children:"Major"}),t.jsx("option",{value:"Lieutenant Commander",children:"Lieutenant Commander"}),t.jsx("option",{value:"Lieutenant Colonel",children:"Lieutenant Colonel"}),t.jsx("option",{value:"Commander",children:"Commander"}),t.jsx("option",{value:"Colonel",children:"Colonel"}),t.jsx("option",{value:"Captain",children:"Captain"}),t.jsx("option",{value:"Brigadier General",children:"Brigadier General"}),t.jsx("option",{value:"Commodore",children:"Commodore"}),t.jsx("option",{value:"Major General",children:"Major General"}),t.jsx("option",{value:"Rear Admiral",children:"Rear Admiral"}),t.jsx("option",{value:"Vice Admiral",children:"Vice Admiral"}),t.jsx("option",{value:"Admiral",children:"Admiral"})]}),t.jsx("input",{type:"text",value:j.name,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,name:b.target.value}:L)),className:"w-40 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white text-sm",placeholder:"Name"}),t.jsx("input",{type:"text",value:j.discord,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,discord:b.target.value}:L)),className:"w-40 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white text-sm",placeholder:"Discord ID"}),t.jsxs("select",{value:j.role,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,role:b.target.value}:L)),className:`w-24 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-sm ${j.role===""?"text-gray-400":"text-white"}`,children:[t.jsx("option",{value:"",disabled:!0,children:"Role"}),t.jsx("option",{value:"Helm",children:"Helm"}),t.jsx("option",{value:"Gunner",children:"Gunner"}),t.jsx("option",{value:"Carpenter",children:"Carpenter"}),t.jsx("option",{value:"Flex",children:"Flex"})]}),t.jsxs("label",{className:"flex items-center gap-1 text-white text-xs whitespace-nowrap flex-shrink-0",children:[t.jsx("input",{type:"checkbox",checked:j.isRep||!1,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,isRep:b.target.checked}:L)),className:"w-4 h-4"}),"REP"]}),t.jsx("button",{onClick:()=>G(b=>b.filter((P,L)=>L!==C)),className:"text-red-400 text-sm px-1 flex-shrink-0","aria-label":`Remove crew member ${C+1}`,children:"X"})]}),t.jsxs("div",{className:"md:hidden space-y-2 border border-gray-600 p-3 rounded bg-[#2a2a2a] relative",children:[t.jsx("button",{onClick:()=>G(b=>b.filter((P,L)=>L!==C)),className:"absolute top-2 right-2 text-red-400 text-sm","aria-label":`Remove crew member ${C+1}`,children:"X"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("select",{value:j.rank,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,rank:b.target.value}:L)),className:`w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-sm ${j.rank===""?"text-gray-400":"text-white"}`,children:[t.jsx("option",{value:"",disabled:!0,children:"Rank"}),t.jsx("option",{value:"Recruit",children:"Recruit"}),t.jsx("option",{value:"Apprentice",children:"Apprentice"}),t.jsx("option",{value:"Seaman",children:"Seaman"}),t.jsx("option",{value:"Seawoman",children:"Seawoman"}),t.jsx("option",{value:"Marine",children:"Marine"}),t.jsx("option",{value:"Lance Corporal",children:"Lance Corporal"}),t.jsx("option",{value:"Able Seaman",children:"Able Seaman"}),t.jsx("option",{value:"Able Seawoman",children:"Able Seawoman"}),t.jsx("option",{value:"Corporal",children:"Corporal"}),t.jsx("option",{value:"Junior Petty Officer",children:"Junior Petty Officer"}),t.jsx("option",{value:"Staff Sergeant",children:"Staff Sergeant"}),t.jsx("option",{value:"Petty Officer",children:"Petty Officer"}),t.jsx("option",{value:"Gunnery Sergeant",children:"Gunnery Sergeant"}),t.jsx("option",{value:"Chief Petty Officer",children:"Chief Petty Officer"}),t.jsx("option",{value:"Master Sergeant",children:"Master Sergeant"}),t.jsx("option",{value:"Senior Chief Petty Officer",children:"Senior Chief Petty Officer"}),t.jsx("option",{value:"Second Lieutenant",children:"Second Lieutenant"}),t.jsx("option",{value:"Midshipman",children:"Midshipman"}),t.jsx("option",{value:"Midshipwoman",children:"Midshipwoman"}),t.jsx("option",{value:"Marine Captain",children:"Marine Captain"}),t.jsx("option",{value:"Lieutenant",children:"Lieutenant"}),t.jsx("option",{value:"Major",children:"Major"}),t.jsx("option",{value:"Lieutenant Commander",children:"Lieutenant Commander"}),t.jsx("option",{value:"Lieutenant Colonel",children:"Lieutenant Colonel"}),t.jsx("option",{value:"Commander",children:"Commander"}),t.jsx("option",{value:"Colonel",children:"Colonel"}),t.jsx("option",{value:"Captain",children:"Captain"}),t.jsx("option",{value:"Brigadier General",children:"Brigadier General"}),t.jsx("option",{value:"Commodore",children:"Commodore"}),t.jsx("option",{value:"Major General",children:"Major General"}),t.jsx("option",{value:"Rear Admiral",children:"Rear Admiral"}),t.jsx("option",{value:"Vice Admiral",children:"Vice Admiral"}),t.jsx("option",{value:"Admiral",children:"Admiral"})]}),t.jsx("input",{type:"text",value:j.name,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,name:b.target.value}:L)),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white text-sm",placeholder:"Name"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"text",value:j.discord,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,discord:b.target.value}:L)),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white text-sm",placeholder:"Discord ID"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:j.role,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,role:b.target.value}:L)),className:`flex-1 p-2 bg-[#3a3a3a] rounded border border-gray-600 text-sm ${j.role===""?"text-gray-400":"text-white"}`,children:[t.jsx("option",{value:"",disabled:!0,children:"Role"}),t.jsx("option",{value:"Helm",children:"Helm"}),t.jsx("option",{value:"Gunner",children:"Gunner"}),t.jsx("option",{value:"Carpenter",children:"Carpenter"}),t.jsx("option",{value:"Flex",children:"Flex"})]}),t.jsxs("label",{className:"flex items-center gap-1 text-white text-xs whitespace-nowrap",children:[t.jsx("input",{type:"checkbox",checked:j.isRep||!1,onChange:b=>G(P=>P.map((L,W)=>W===C?{...L,isRep:b.target.checked}:L)),className:"w-4 h-4"}),"REP"]})]})]})]})]},j.id||C)),t.jsx("div",{children:t.jsx("button",{onClick:()=>G(j=>[...j,{id:String(Date.now()),name:"",discord:"",rank:"",role:"",isRep:!1}]),className:"mt-2 bg-green-700 hover:bg-green-600 text-white px-2 py-1 rounded text-sm",children:"Add Crew Member"})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Mode"}),t.jsxs("select",{value:H,onChange:j=>Q(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"patrol",children:"Patrol"}),t.jsx("option",{value:"skirmish",children:"Skirmish"})]})]}),H==="patrol"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Events"}),t.jsxs("div",{className:"space-y-2",children:[$.split(`
`).filter(j=>j.trim()).map((j,C)=>{const b=j.match(/^(\d+)x\s*(.*)$/),P=b?b[1]:"1",L=b?b[2]:j;return t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"number",value:P,onChange:W=>{const E=$.split(`
`).filter(B=>B.trim()),I=W.target.value,U=I&&/^\d+$/.test(I)?I:"1",te=E[C].match(/^(\d+)x\s*(.*)$/),J=te?te[2]:E[C];E[C]=`${U}x ${J}`,X(E.join(`
`))},min:"1",className:"w-16 p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white text-center"}),t.jsx("span",{className:"self-center text-white",children:"x"}),t.jsx("input",{type:"text",value:L,onChange:W=>{const E=$.split(`
`).filter(te=>te.trim()),I=E[C].match(/^(\d+)x\s*(.*)$/),U=I?I[1]:"1";E[C]=`${U}x ${W.target.value}`,X(E.join(`
`))},className:"flex-1 p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white placeholder-gray-400",placeholder:"Event..."}),t.jsx("button",{onClick:()=>{const W=$.split(`
`).filter(E=>E.trim()).filter((E,I)=>I!==C);X(W.join(`
`))},className:"text-red-400 text-sm px-2","aria-label":`Remove event ${C+1}`,children:"X"})]},C)}),t.jsx("button",{onClick:()=>{const j="1x ";X($?$+`
`+j:j)},className:"mt-2 bg-green-700 hover:bg-green-600 text-white px-2 py-1 rounded text-sm",children:"Add Event"})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Start Gold"}),t.jsx("input",{type:"text",value:n,onChange:j=>r(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Amount..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"End Gold"}),t.jsx("input",{type:"text",value:d,onChange:j=>u(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Amount..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Gold Earned"}),t.jsx("input",{type:"text",value:i,onChange:j=>p(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Amount..."})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Doubloons"}),t.jsx("input",{type:"text",value:e,onChange:j=>o(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Amount..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Ancient Coins"}),t.jsx("input",{type:"text",value:m,onChange:j=>l(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Amount..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fish Caught"}),t.jsx("input",{type:"text",value:a,onChange:j=>s(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Amount..."})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Your Team"}),t.jsxs("select",{value:k,onChange:j=>{const C=j.target.value;A(C),c.forEach((b,P)=>{f(P,{ourTeam:C})})},className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"Athena",children:"Athena"}),t.jsx("option",{value:"Reaper",children:"Reaper"})]})]}),H==="skirmish"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Skirmish Dives"}),t.jsxs("div",{className:"space-y-3",children:[c.map((j,C)=>t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("img",{src:fe(`${j.ourTeam.toLowerCase()}.webp`),alt:j.ourTeam,className:"w-6 h-6",onError:b=>{const P=b.currentTarget;P.dataset.attempt?P.dataset.attempt==="1"&&(P.dataset.attempt="2",P.src=`/${j.ourTeam.toLowerCase()}.webp`):(P.dataset.attempt="1",P.src=`${j.ourTeam.toLowerCase()}.webp`)}}),t.jsxs("select",{value:j.ourTeam,onChange:b=>f(C,{ourTeam:b.target.value}),className:"flex-1 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"Athena",children:"Athena"}),t.jsx("option",{value:"Reaper",children:"Reaper"})]}),t.jsx("span",{className:"text-white",children:"vs"}),t.jsx("img",{src:fe(`${j.enemyTeam.toLowerCase()}.webp`),alt:j.enemyTeam,className:"w-6 h-6",onError:b=>{const P=b.currentTarget;P.dataset.attempt?P.dataset.attempt==="1"&&(P.dataset.attempt="2",P.src=`/${j.enemyTeam.toLowerCase()}.webp`):(P.dataset.attempt="1",P.src=`${j.enemyTeam.toLowerCase()}.webp`)}}),t.jsxs("select",{value:j.enemyTeam,onChange:b=>f(C,{enemyTeam:b.target.value}),className:"flex-1 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"Athena",children:"Athena"}),t.jsx("option",{value:"Reaper",children:"Reaper"})]}),t.jsxs("select",{value:j.outcome,onChange:b=>f(C,{outcome:b.target.value}),className:"flex-1 p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"win",children:"Win"}),t.jsx("option",{value:"loss",children:"Loss"})]}),t.jsx("button",{onClick:()=>h(C),className:"text-red-400 text-sm px-2","aria-label":`Remove dive ${C+1}`,children:"X"})]}),t.jsx("input",{type:"text",value:j.notes,onChange:b=>f(C,{notes:b.target.value}),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Notes (optional)"})]},C)),t.jsx("button",{onClick:y,className:"mt-2 bg-green-700 hover:bg-green-600 text-white px-2 py-1 rounded text-sm",children:"Add Dive"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Log Entry"}),t.jsx("textarea",{value:D,onChange:j=>w(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white h-32",placeholder:"Write your log entry..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Host"}),t.jsxs("select",{value:x,onChange:j=>T(j.target.value),className:"w-full p-2 h-10 bg-[#3a3a3a] rounded border border-gray-600 text-white",children:[t.jsx("option",{value:"",disabled:!0,style:{color:"#888"},children:"Select Host"}),g.filter(j=>j.name&&j.name.trim()!=="").map(j=>t.jsxs("option",{value:j.id,children:[j.name," - ",j.rank||"No Rank"]},j.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tagline"}),t.jsx("input",{type:"text",value:ne,onChange:j=>R(j.target.value),className:"w-full p-2 bg-[#3a3a3a] rounded border border-gray-600 text-white",placeholder:"Enter tagline..."})]}),t.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-4 grid-cols-2 gap-4",children:[t.jsxs("button",{onClick:()=>{O(),G([{id:String(Date.now()),name:"",discord:"",rank:"",role:"",isRep:!1},{id:String(Date.now()+1),name:"",discord:"",rank:"",role:"",isRep:!1}])},className:"w-full hover:opacity-90 text-white font-bold py-2 px-4 rounded flex items-center justify-center gap-2",style:{backgroundColor:"#c0392b"},children:[t.jsx(wt,{size:20}),t.jsx("span",{className:"hidden sm:inline",children:"Reset"})]}),t.jsxs("button",{onClick:()=>F(!0),className:"w-full hover:opacity-90 text-white font-bold py-2 px-4 rounded flex items-center justify-center gap-2",style:{backgroundColor:"#5865F2"},children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02zM8.52 14.91c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.84 2.12-1.89 2.12zm6.97 0c-1.03 0-1.89-.95-1.89-2.12s.84-2.12 1.89-2.12c1.06 0 1.9.96 1.89 2.12c0 1.17-.83 2.12-1.89 2.12z"})}),t.jsx("span",{className:"hidden sm:inline",children:"Copy Discord"})]}),t.jsxs("button",{onClick:async()=>{const j=(await Ge(async()=>{const{default:U}=await import("./pdf-BvPGsvip.js").then(te=>te.h);return{default:U}},[])).default,C=document.getElementById("export-preview-overlay");if(!C){alert("No preview found");return}const b={position:C.style.position,left:C.style.left,pointerEvents:C.style.pointerEvents,zIndex:C.style.zIndex};C.style.position="fixed",C.style.left="0",C.style.top="0",C.style.zIndex="99999",C.style.pointerEvents="none",await new Promise(U=>setTimeout(U,200));const P=Array.from(C.querySelectorAll(".preview-page"));if(P.length===0){Object.assign(C.style,b),alert("No preview found");return}const L=U=>{const te=U.querySelector("#writing-area");return te?!(te.children.length>0||te.textContent&&te.textContent.replace(/\s+/g,"")!==""):!0},E=M?(U=>{if(U===""||U==null)return"";const te=Number(U);if(!Number.isFinite(te))return U;const J=te%100;if(J>=11&&J<=13)return`${te}th`;const B=te%10;return B===1?`${te}st`:B===2?`${te}nd`:B===3?`${te}rd`:`${te}th`})(M):"nth";let I=0;for(let U=0;U<P.length;U++){if(L(P[U]))continue;P[U].scrollIntoView({block:"start"}),await new Promise(Y=>setTimeout(Y,100));const J=(await j(P[U],{scale:2,useCORS:!0,allowTaint:!0,width:816,height:1190,scrollX:0,scrollY:0})).toDataURL("image/png"),B=document.createElement("a");B.download=P.length>1?`USS ${ie} - ${E} Voyage Log - Page ${I+1}.png`:`USS ${ie} - ${E} Voyage Log.png`,B.href=J,B.click(),I++,await new Promise(Y=>setTimeout(Y,300))}C.style.position=b.position,C.style.left=b.left,C.style.pointerEvents=b.pointerEvents,C.style.zIndex=b.zIndex,I===0&&alert("No non-blank pages to export")},className:"w-full hover:opacity-90 text-white font-bold py-2 px-4 rounded flex items-center justify-center gap-2",style:{backgroundColor:"#27ae60"},children:[t.jsx(bt,{size:20}),t.jsx("span",{className:"hidden sm:inline",children:"Generate Image"})]}),t.jsxs("button",{onClick:async()=>{const j=(await Ge(async()=>{const{default:B}=await import("./pdf-BvPGsvip.js").then(Y=>Y.h);return{default:B}},[])).default,{jsPDF:C}=await Ge(async()=>{const{jsPDF:B}=await import("./pdf-BvPGsvip.js").then(Y=>Y.j);return{jsPDF:B}},[]),b=document.getElementById("export-preview-overlay");if(!b){alert("No preview found");return}const P={position:b.style.position,left:b.style.left,pointerEvents:b.style.pointerEvents,zIndex:b.style.zIndex};b.style.position="fixed",b.style.left="0",b.style.top="0",b.style.zIndex="99999",b.style.pointerEvents="none",await new Promise(B=>setTimeout(B,200));const L=Array.from(b.querySelectorAll(".preview-page"));if(L.length===0){Object.assign(b.style,P),alert("No preview found");return}const W=B=>{const Y=B.querySelector("#writing-area");return Y?!(Y.children.length>0||Y.textContent&&Y.textContent.replace(/\s+/g,"")!==""):!0},E=new C({orientation:"portrait",unit:"mm",format:"a4"});let I=0;for(let B=0;B<L.length;B++){if(W(L[B]))continue;L[B].scrollIntoView({block:"start"}),await new Promise(ye=>setTimeout(ye,100));const Y=await j(L[B],{scale:2,useCORS:!0,allowTaint:!0,width:816,height:1190,scrollX:0,scrollY:0}),ge=Y.toDataURL("image/png"),Se=E.internal.pageSize.getWidth(),we=Se,he=Y.height*Se/Y.width;I>0&&E.addPage(),E.addImage(ge,"PNG",0,0,we,he),I++}if(b.style.position=P.position,b.style.left=P.left,b.style.pointerEvents=P.pointerEvents,b.style.zIndex=P.zIndex,I===0){alert("No non-blank pages to export");return}const te=M?(B=>{if(B===""||B==null)return"";const Y=Number(B);if(!Number.isFinite(Y))return B;const ge=Y%100;if(ge>=11&&ge<=13)return`${Y}th`;const Se=Y%10;return Se===1?`${Y}st`:Se===2?`${Y}nd`:Se===3?`${Y}rd`:`${Y}th`})(M):"nth",J=`USS ${ie} - ${te} Voyage Log.pdf`;E.save(J)},className:"w-full hover:opacity-90 text-white font-bold py-2 px-4 rounded flex items-center justify-center gap-2",style:{backgroundColor:"#e74c3c"},children:[t.jsx(xt,{size:20}),t.jsx("span",{className:"hidden sm:inline",children:"Generate PDF"})]})]})]})})})};function Ot(){const[H,Q]=q.useState("editor"),[ie,se]=q.useState(!1),$=q.useRef(0),X=q.useRef(0),z=q.useRef(0),re=q.useRef(!1);q.useEffect(()=>{(()=>{const r=navigator.userAgent||navigator.vendor,d=/android|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(r.toLowerCase())||!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2);se(d)})()},[]);const i=n=>{if(n.target.closest('input, textarea, select, button, label, [contenteditable="true"]')){$.current=0,X.current=0;return}$.current=n.touches[0].clientX,z.current=n.touches[0].clientY,X.current=n.touches[0].clientX,re.current=!1},p=n=>{if($.current===0||re.current)return;const r=n.touches[0].clientX,d=n.touches[0].clientY,u=Math.abs(r-$.current),m=Math.abs(d-z.current);if(m>u&&m>10){re.current=!0;return}X.current=r},e=()=>{if($.current===0||re.current){$.current=0,X.current=0,z.current=0,re.current=!1;return}const n=$.current-X.current;Math.abs(n)>80&&(n>0?Q("preview"):Q("editor")),$.current=0,X.current=0,z.current=0,re.current=!1},o=ie;return t.jsx(ht,{children:t.jsxs("div",{className:"min-h-screen bg-[#1a1a1a] text-white",children:[t.jsx("div",{role:"banner",children:t.jsx(Pt,{mobileMode:o,showMobileToggle:!1})}),t.jsx(jt,{"data-testid":"settings-modal"}),t.jsx(vt,{"data-testid":"copy-modal"}),o?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"sticky top-0 z-20 bg-[#1a1a1a] border-b border-gray-700",children:t.jsxs("div",{className:"flex",children:[t.jsx("button",{onClick:()=>Q("editor"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${H==="editor"?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"Editor"}),t.jsx("button",{onClick:()=>Q("preview"),className:`flex-1 py-3 px-4 text-center font-medium transition-colors ${H==="preview"?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"Preview"})]})}),t.jsx("main",{className:"h-[calc(100vh-9rem)] overflow-hidden",children:t.jsxs("div",{className:"h-full flex transition-transform duration-300 ease-in-out",style:{transform:H==="editor"?"translateX(0)":"translateX(-100vw)",width:"200vw"},onTouchStart:i,onTouchMove:p,onTouchEnd:e,children:[t.jsx("div",{className:"w-screen h-full overflow-y-auto",children:t.jsx("div",{className:"p-4",children:t.jsx(Ve,{"data-testid":"editor"})})}),t.jsx("div",{className:"w-screen h-full overflow-y-auto",children:t.jsx("div",{className:"p-4",children:t.jsx(Ue,{"data-testid":"log-preview"})})})]})})]}):t.jsx(t.Fragment,{children:t.jsx("main",{className:"container mx-auto p-4",children:t.jsxs("div",{className:"hidden md:flex gap-4",children:[t.jsx(Ve,{"data-testid":"editor"}),t.jsx(Ue,{"data-testid":"log-preview"})]})})})]})})}We(document.getElementById("root")).render(t.jsx(q.StrictMode,{children:t.jsx(Ot,{})}));
